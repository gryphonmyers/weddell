!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Weddell=e()}}(function(){return function i(s,a,u){function c(t,e){if(!a[t]){if(!s[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=a[t]={exports:{}};s[t][0].call(o.exports,function(e){return c(s[t][1][e]||e)},o,o.exports,i,s,a,u)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<u.length;e++)c(u[e]);return c}({1:[function(e,t,n){"use strict";function r(e){return!!e}t.exports=function(e){return e.filter(r)}},{}],2:[function(e,t,n){"use strict";t.exports=function(e,t,n){if(null!=e)for(var r=e.length,o=-1;++o<r;){var i=e[o];if(!1===t.call(n,i,o,e))break}}},{}],3:[function(e,t,n){"use strict";function i(e,t,n){return null==t?n||0:t<0?Math.max(e+t,0):Math.min(t,e)}t.exports=function(e,t,n){var r=e.length,o=[];for(t=i(r,t),n=i(r,n,r);t<n;)o.push(e[t++]);return o}},{}],4:[function(e,n,t){(function(e){"use strict";var t;"Set"in e?"function"==typeof Set.prototype.forEach&&(t=!1,new Set([!0]).forEach(function(e){t=e}),!0===t)?n.exports=function(e){var t=[];return new Set(e).forEach(function(e){t.push(e)}),t}:n.exports=function(e){var t=new Set;return e.filter(function(e){return!t.has(e)&&(t.add(e),!0)})}:n.exports=function(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(e,t,n){},{}],6:[function(e,t,n){"use strict";var l,f,p;t.exports=(f=String.prototype.split,p=/()??/.exec("")[1]===l,function(e,t,n){if("[object RegExp]"!==Object.prototype.toString.call(t))return f.call(e,t,n);var r,o,i,s,a=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.extended?"x":"")+(t.sticky?"y":""),c=0;for(t=new RegExp(t.source,u+"g"),e+="",p||(r=new RegExp("^"+t.source+"$(?!\\s)",u)),n=n===l?-1>>>0:n>>>0;(o=t.exec(e))&&!((i=o.index+o[0].length)>c&&(a.push(e.slice(c,o.index)),!p&&1<o.length&&o[0].replace(r,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===l&&(o[e]=l)}),1<o.length&&o.index<e.length&&Array.prototype.push.apply(a,o.slice(1)),s=o[0].length,c=i,a.length>=n));)t.lastIndex===o.index&&t.lastIndex++;return c===e.length?!s&&t.test("")||a.push(""):a.push(e.slice(c)),a.length>n?a.slice(0,n):a})},{}],7:[function(e,t,n){"use strict";function a(e){return null==e}function u(e){return!(!e||"object"!==(void 0===e?"undefined":c(e))||"number"!=typeof e.length||"function"!=typeof e.copy||"function"!=typeof e.slice||0<e.length&&"number"!=typeof e[0])}var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=Array.prototype.slice,f=e("./lib/keys.js"),p=e("./lib/is_arguments.js"),h=t.exports=function(e,t,n){return n||(n={}),e===t||(e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():!e||!t||"object"!=(void 0===e?"undefined":c(e))&&"object"!=(void 0===t?"undefined":c(t))?n.strict?e===t:e==t:function(e,t,n){var r,o;if(a(e)||a(t))return!1;if(e.prototype!==t.prototype)return!1;if(p(e))return!!p(t)&&(e=l.call(e),t=l.call(t),h(e,t,n));if(u(e)){if(!u(t))return!1;if(e.length!==t.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}try{var i=f(e),s=f(t)}catch(e){return!1}if(i.length!=s.length)return!1;for(i.sort(),s.sort(),r=i.length-1;0<=r;r--)if(i[r]!=s[r])return!1;for(r=i.length-1;0<=r;r--)if(o=i[r],!h(e[o],t[o],n))return!1;return(void 0===e?"undefined":c(e))===(void 0===t?"undefined":c(t))}(e,t,n))}},{"./lib/is_arguments.js":8,"./lib/keys.js":9}],8:[function(e,t,n){"use strict";function r(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function o(e){return e&&"object"==(void 0===e?"undefined":i(e))&&"number"==typeof e.length&&Object.prototype.hasOwnProperty.call(e,"callee")&&!Object.prototype.propertyIsEnumerable.call(e,"callee")||!1}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(n=t.exports=s?r:o).supported=r,n.unsupported=o},{}],9:[function(e,t,n){"use strict";function r(e){var t=[];for(var n in e)t.push(n);return t}(t.exports="function"==typeof Object.keys?Object.keys:r).shim=r},{}],10:[function(e,t,n){"use strict";var r=e("./src/make-defaults-func");t.exports=r(!0,e("./src/array-merge"))},{"./src/array-merge":11,"./src/make-defaults-func":12}],11:[function(e,t,n){"use strict";t.exports=function(){return Array.from(arguments).slice(1).reduce(function(t,e){return t.concat(e.filter(function(e){return t.indexOf(e)<0}))},arguments[0])}},{}],12:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(r,o){return function n(){return Array.from(arguments).slice(1).reduce(function(t,e){return Object.entries(e).forEach(function(e){void 0===t[e[0]]?t[e[0]]=e[1]:r&&[e[1],t[e[0]]].every(function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&"Object"===e.constructor.name})?t[e[0]]=n(t[e[0]],e[1]):o&&[e[1],t[e[0]]].every(function(e){return e&&"object"===(void 0===e?"undefined":i(e))&&Array.isArray(e)})&&(t[e[0]]=o(t[e[0]],e[1]))}),t},Object.assign({},arguments[0]))}}},{}],13:[function(e,t,n){"use strict";var r,o;r=window.document,o=function(n){var r=document,o=window,i=/^loaded|^i|^c/.test(r.readyState),s="DOMContentLoaded";return new Promise(function(e){function t(){e(n),r.removeEventListener(s,t),o.removeEventListener("load",t)}if(i)return e(n);r.addEventListener(s,t),o.addEventListener("load",t)})},void 0!==t?t.exports=o:r.ready=o},{}],14:[function(e,t,n){"use strict";e("individual/one-version")("ev-store","7");var r="__EV_STORE_KEY@7";t.exports=function(e){var t=e[r];return t||(t=e[r]={}),t}},{"individual/one-version":20}],15:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o={byMatcher:function(e,t,n){if(void 0===n&&(n={}),null===n||Array.isArray(n)||"object"!==(void 0===n?"undefined":r(n)))throw new Error("Expected opts to be an object.");if(e&&e!==document)return t(e)?e:this.byMatcher(e.parentNode,t,n);if(n.throwOnMiss)throw new Error("Expected to find parent node, but none was found.")},byClassName:function(e,t,n){return this.byMatcher(e,function(e){return e.classList.contains(t)},n)},withDataAttribute:function(e,t,n){return this.byMatcher(e,function(e){return e.dataset.hasOwnProperty(t)},n)}};t.exports=o},{}],16:[function(e,t,n){"use strict";t.exports=function(e,t,n){for(var r in e)if(!1===t.call(n,e[r],r,e))break}},{}],17:[function(e,t,n){"use strict";var i=e("for-in"),s=Object.prototype.hasOwnProperty;t.exports=function(n,r,o){i(n,function(e,t){if(s.call(n,t))return r.call(o,n[t],t,n)})}},{"for-in":16}],18:[function(o,i,e){(function(e){"use strict";var t,n=void 0!==e?e:"undefined"!=typeof window?window:{},r=o("min-document");"undefined"!=typeof document?t=document:(t=n["__GLOBAL_DOCUMENT_CACHE@4"])||(t=n["__GLOBAL_DOCUMENT_CACHE@4"]=r),i.exports=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":5}],19:[function(e,t,n){(function(e){"use strict";var n="undefined"!=typeof window?window:void 0!==e?e:{};t.exports=function(e,t){return e in n?n[e]:n[e]=t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(e,t,n){"use strict";var i=e("./index.js");t.exports=function(e,t,n){var r="__INDIVIDUAL_ONE_VERSION_"+e,o=i(r+"_ENFORCE_SINGLETON",t);if(o!==t)throw new Error("Can only have one copy of "+e+".\nYou already have version "+o+" installed.\nThis means you cannot install version "+t);return i(r,n)}},{"./index.js":19}],21:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return"object"===(void 0===e?"undefined":r(e))&&null!==e}},{}],22:[function(e,t,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){return null!=e&&"object"===(void 0===e?"undefined":r(e))&&!1===Array.isArray(e)}},{}],23:[function(e,t,r){"use strict";function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();!function(e,t){if(void 0!==r)t(r);else{var n={};t(n),(void 0).mixwith=n}}(0,function(e){Object.defineProperty(e,"__esModule",{value:!0});var n=e.apply=function(e,t){var n=t(e);return n.prototype.__mixwith_appliedMixin=s(t),n},r=e.isApplicationOf=function(e,t){return e.hasOwnProperty("__mixwith_appliedMixin")&&e.__mixwith_appliedMixin===s(t)},o=e.hasMixin=function(e,t){for(;null!=e;){if(r(e,t))return!0;e=Object.getPrototypeOf(e)}return!1},i=e.wrap=function(e,t){return Object.setPrototypeOf(t,e),e.__mixwith_wrappedMixin||(e.__mixwith_wrappedMixin=e),t},s=e.unwrap=function(e){return e.__mixwith_wrappedMixin||e},t=e.Cached=function(r){return i(r,function(e){var t=e.__mixwith_cachedApplications;t||(t=e.__mixwith_cachedApplications=new Map);var n=t.get(r);return n||(n=r(e),t.set(r,n)),n})},a=e.DeDupe=function(t){return i(t,function(e){return o(e.prototype,t)?e:t(e)})},u=(e.HasInstance=function(t){return Symbol&&Symbol.hasInstance&&!t[Symbol.hasInstance]&&Object.defineProperty(t,Symbol.hasInstance,{value:function(e){return o(e,t)}}),t},e.BareMixin=function(t){return i(t,function(e){return n(e,t)})}),c=(e.Mixin=function(e){return a(t(u(e)))},e.mix=function(e){return new c(e)},function(){function t(e){l(this,t),this.superclass=e||function e(){l(this,e)}}return f(t,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),t}())})},{}],24:[function(e,r,t){(function(e,v){"use strict";var t,n,m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};(n=void 0!==e?e:void 0)[t="Promise"]=n[t]||function(){function i(e,t){o.add(e,t),f||(f=h(o.drain))}function s(e){var t,n=void 0===e?"undefined":m(e);return null==e||"object"!=n&&"function"!=n||(t=e.then),"function"==typeof t&&t}function a(){for(var e=0;e<this.chain.length;e++)t(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function t(e,t,n){var r,o;try{!1===t?n.reject(e.msg):(r=!0===t?e.msg:t.call(void 0,e.msg))===n.promise?n.reject(TypeError("Promise-chain cycle")):(o=s(r))?o.call(r,n.resolve,n.reject):n.resolve(r)}catch(e){n.reject(e)}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,0<t.chain.length&&i(a,t))}function c(e,n,r,o){for(var t=0;t<n.length;t++)!function(t){e.resolve(n[t]).then(function(e){r(t,e)},o)}(t)}function l(e){this.def=e,this.triggered=!1}function n(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function e(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var r=new n(this);this.then=function(e,t){var n={success:"function"!=typeof e||e,failure:"function"==typeof t&&t};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),r.chain.push(n),0!==r.state&&i(a,r),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(n){var r,o=this;if(!o.triggered){o.triggered=!0,o.def&&(o=o.def);try{(r=s(n))?i(function(){var t=new l(o);try{r.call(n,function(){e.apply(t,arguments)},function(){u.apply(t,arguments)})}catch(e){u.call(t,e)}}):(o.msg=n,o.state=1,0<o.chain.length&&i(a,o))}catch(e){u.call(new l(o),e)}}}).call(r,e)},function(e){u.call(r,e)})}catch(e){u.call(r,e)}}var r,f,o,p=Object.prototype.toString,h=void 0!==v?function(e){return v(e)}:setTimeout;try{Object.defineProperty({},"x",{}),r=function(e,t,n,r){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!1!==r})}}catch(i){r=function(e,t,n){return e[t]=n,e}}o=function(){function n(e,t){this.fn=e,this.self=t,this.next=void 0}var r,o,i;return{add:function(e,t){i=new n(e,t),o?o.next=i:r=i,o=i,i=void 0},drain:function(){var e=r;for(r=o=f=void 0;e;)e.fn.call(e.self),e=e.next}}}();var d=r({},"constructor",e,!1);return r(e.prototype=d,"__NPO__",0,!1),r(e,"resolve",function(n){return n&&"object"==(void 0===n?"undefined":m(n))&&1===n.__NPO__?n:new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");e(n)})}),r(e,"reject",function(n){return new this(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");t(n)})}),r(e,"all",function(t){var s=this;return"[object Array]"!=p.call(t)?s.reject(TypeError("Not an array")):0===t.length?s.resolve([]):new s(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");var r=t.length,o=Array(r),i=0;c(s,t,function(e,t){o[e]=t,++i===r&&n(o)},e)})}),r(e,"race",function(t){var r=this;return"[object Array]"!=p.call(t)?r.reject(TypeError("Not an array")):new r(function(n,e){if("function"!=typeof n||"function"!=typeof e)throw TypeError("Not a function");c(r,t,function(e,t){n(t)},e)})}),e}(),void 0!==r&&r.exports&&(r.exports=n[t])}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("timers").setImmediate)},{timers:31}],25:[function(e,t,n){"use strict";var r=e("array-slice"),o=e("./mutable");t.exports=function(){var e=r(arguments);return o.apply(null,[{}].concat(e))}},{"./mutable":26,"array-slice":3}],26:[function(e,t,n){"use strict";var r=e("array-each"),o=e("array-slice"),i=e("for-own"),s=e("isobject");t.exports=function(n,e){return null==n?{}:(r(o(arguments,1),function(e){s(e)&&i(e,function(e,t){null==n[t]&&(n[t]=e)})}),n)}},{"array-each":2,"array-slice":3,"for-own":17,isobject:22}],27:[function(e,t,n){"use strict";function i(e,t){for(var n,r=[],o=0,i=0,s="",a=t&&t.delimiter||"/";null!=(n=P.exec(e));){var u=n[0],c=n[1],l=n.index;if(s+=e.slice(i,l),i=l+u.length,c)s+=c[1];else{var f=e[i],p=n[2],h=n[3],d=n[4],v=n[5],m=n[6],y=n[7];s&&(r.push(s),s="");var g=null!=p&&null!=f&&f!==p,b="+"===m||"*"===m,w="?"===m||"*"===m,k=n[2]||a,_=d||v;r.push({name:h||o++,prefix:p||"",delimiter:k,optional:w,repeat:b,partial:g,asterisk:!!y,pattern:_?(x=_,x.replace(/([=!:$\/()])/g,"\\$1")):y?".*":"[^"+O(k)+"]+?"})}}var x;return i<e.length&&(s+=e.substr(i)),s&&r.push(s),r}function p(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function r(l){for(var f=new Array(l.length),e=0;e<l.length;e++)"object"===o(l[e])&&(f[e]=new RegExp("^(?:"+l[e].pattern+")$"));return function(e,t){for(var n="",r=e||{},o=(t||{}).pretty?p:encodeURIComponent,i=0;i<l.length;i++){var s=l[i];if("string"!=typeof s){var a,u=r[s.name];if(null==u){if(s.optional){s.partial&&(n+=s.prefix);continue}throw new TypeError('Expected "'+s.name+'" to be defined')}if(v(u)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(a=o(u[c]),!f[i].test(a))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'", but received `'+JSON.stringify(a)+"`");n+=(0===c?s.prefix:s.delimiter)+a}}else{if(a=s.asterisk?encodeURI(u).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):o(u),!f[i].test(a))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but received "'+a+'"');n+=s.prefix+a}}else n+=s}return n}}function O(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function h(e,t){return e.keys=t,e}function d(e){return e.sensitive?"":"i"}function s(e,t,n){v(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,o=!1!==n.end,i="",s=0;s<e.length;s++){var a=e[s];if("string"==typeof a)i+=O(a);else{var u=O(a.prefix),c="(?:"+a.pattern+")";t.push(a),a.repeat&&(c+="(?:"+u+c+")*"),i+=c=a.optional?a.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var l=O(n.delimiter||"/"),f=i.slice(-l.length)===l;return r||(i=(f?i.slice(0,-l.length):i)+"(?:"+l+"(?=$))?"),i+=o?"$":r&&f?"":"(?="+l+"|$)",h(new RegExp("^"+i,d(n)),t)}function a(e,t,n){return v(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(e,t)}(e,t):v(e)?function(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(a(e[o],t,n).source);return h(new RegExp("(?:"+r.join("|")+")",d(n)),t)}(e,t,n):(r=t,s(i(e,o=n),r,o));var r,o}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v=e("isarray");t.exports=a,t.exports.parse=i,t.exports.compile=function(e,t){return r(i(e,t))},t.exports.tokensToFunction=r,t.exports.tokensToRegExp=s;var P=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{isarray:28}],28:[function(e,t,n){"use strict";t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],29:[function(e,t,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};r=function(){return function(n){function r(e){if(o[e])return o[e].exports;var t=o[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var o={};return r.m=n,r.c=o,r.p="",r(0)}([function(e,t,n){var r,o=n(1),i=(r=o)&&r.__esModule?r:{default:r};e.exports=i.default},function(e,t,n){function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0;var o,a=r(n(2)),i=r(n(3)),s=n(6),u=(o=s)&&o.__esModule?o:{default:o},c=n(5),l={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},f=function(){function s(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),this.stream=t;var r=!1,o={};for(var i in a)a.hasOwnProperty(i)&&(n.autoFix&&(o[i+"Fix"]=!0),r=r||o[i+"Fix"]);this._peekToken=r?(this._readToken=(0,u.default)(this,o,function(){return e._readTokenImpl()}),(0,u.default)(this,o,function(){return e._peekTokenImpl()})):(this._readToken=this._readTokenImpl,this._peekTokenImpl)}return s.prototype.append=function(e){this.stream+=e},s.prototype.prepend=function(e){this.stream=e+this.stream},s.prototype._readTokenImpl=function(){var e=this._peekTokenImpl();if(e)return this.stream=this.stream.slice(e.length),e},s.prototype._peekTokenImpl=function(){for(var e in l)if(l.hasOwnProperty(e)&&l[e].test(this.stream)){var t=i[e](this.stream);if(t)return"startTag"===t.type&&/script|style/i.test(t.tagName)?null:(t.text=this.stream.substr(0,t.length),t)}},s.prototype.peekToken=function(){return this._peekToken()},s.prototype.readToken=function(){return this._readToken()},s.prototype.readTokens=function(e){for(var t=void 0;t=this.readToken();)if(e[t.type]&&!1===e[t.type](t))return},s.prototype.clear=function(){var e=this.stream;return this.stream="",e},s.prototype.rest=function(){return this.stream},s}();for(var p in(t.default=f).tokenToString=function(e){return e.toString()},f.escapeAttributes=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=(0,c.escapeQuotes)(e[n],null));return t},f.supports=a)a.hasOwnProperty(p)&&(f.browserHasFlaw=f.browserHasFlaw||!a[p]&&p)},function(e,t){var n=!(t.__esModule=!0),r=!1,o=window.document.createElement("div");try{var i="<P><I></P></I>";o.innerHTML=i,t.tagSoup=n=o.innerHTML!==i}catch(e){t.tagSoup=n=!1}try{o.innerHTML="<P><i><P></P></i></P>",t.selfClose=r=2===o.childNodes.length}catch(e){t.selfClose=r=!1}o=null,t.tagSoup=n,t.selfClose=r},function(e,t,n){function o(e){if(-1!==e.indexOf(">")){var t=e.match(s.startTag);if(t){var n={},r={},o=t[2];return t[2].replace(s.attr,function(e,t){arguments[2]||arguments[3]||arguments[4]||arguments[5]?arguments[5]?(n[arguments[5]]="",r[arguments[5]]=!0):n[t]=arguments[2]||arguments[3]||arguments[4]||s.fillAttr.test(t)&&t||"":n[t]="",o=o.replace(e,"")}),new i.StartTagToken(t[1],t[0].length,n,r,!!t[3],o.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))}}}t.__esModule=!0,t.comment=function(e){var t=e.indexOf("--\x3e");if(0<=t)return new i.CommentToken(e.substr(4,t-1),t+3)},t.chars=function(e){var t=e.indexOf("<");return new i.CharsToken(0<=t?t:e.length)},t.startTag=o,t.atomicTag=function(e){var t=o(e);if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var r=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(r)return new i.AtomicTagToken(t.tagName,r[0].length+t.length,t.attrs,t.booleanAttrs,r[1])}}},t.endTag=function(e){var t=e.match(s.endTag);if(t)return new i.EndTagToken(t[1],t[0].length)};var i=n(4),s={startTag:/^<([\-A-Za-z0-9_!:]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,endTag:/^<\/([\-A-Za-z0-9_:]+)[^>]*>/,attr:/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,fillAttr:/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i}},function(e,t,n){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0,t.EndTagToken=t.AtomicTagToken=t.StartTagToken=t.TagToken=t.CharsToken=t.CommentToken=t.Token=void 0;var s=n(5),r=(t.Token=function e(t,n){a(this,e),this.type=t,this.length=n,this.text=""},t.CommentToken=function(){function n(e,t){a(this,n),this.type="comment",this.length=t||(e?e.length:0),this.text="",this.content=e}return n.prototype.toString=function(){return"\x3c!--"+this.content},n}(),t.CharsToken=function(){function t(e){a(this,t),this.type="chars",this.length=e,this.text=""}return t.prototype.toString=function(){return this.text},t}(),t.TagToken=function(){function i(e,t,n,r,o){a(this,i),this.type=e,this.length=n,this.text="",this.tagName=t,this.attrs=r,this.booleanAttrs=o,this.unary=!1,this.html5Unary=!1}return i.formatTag=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n="<"+e.tagName;for(var r in e.attrs)if(e.attrs.hasOwnProperty(r)){n+=" "+r;var o=e.attrs[r];void 0!==e.booleanAttrs&&void 0!==e.booleanAttrs[r]||(n+='="'+(0,s.escapeQuotes)(o)+'"')}return e.rest&&(n+=" "+e.rest),e.unary&&!e.html5Unary?n+="/>":n+=">",null!=t&&(n+=t+"</"+e.tagName+">"),n},i}());t.StartTagToken=function(){function s(e,t,n,r,o,i){a(this,s),this.type="startTag",this.length=t,this.text="",this.tagName=e,this.attrs=n,this.booleanAttrs=r,this.html5Unary=!1,this.unary=o,this.rest=i}return s.prototype.toString=function(){return r.formatTag(this)},s}(),t.AtomicTagToken=function(){function i(e,t,n,r,o){a(this,i),this.type="atomicTag",this.length=t,this.text="",this.tagName=e,this.attrs=n,this.booleanAttrs=r,this.unary=!1,this.html5Unary=!1,this.content=o}return i.prototype.toString=function(){return r.formatTag(this,this.content)},i}(),t.EndTagToken=function(){function n(e,t){a(this,n),this.type="endTag",this.length=t,this.text="",this.tagName=e}return n.prototype.toString=function(){return"</"+this.tagName+">"},n}()},function(e,t){t.__esModule=!0,t.escapeQuotes=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return e?e.replace(/([^"]*)"/g,function(e,t){return/\\/.test(t)?t+'"':t+'\\"'}):t}},function(e,t){function u(e){return e&&"startTag"===e.type&&(e.unary=n.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e}function c(e,t){var n=t.pop();e.prepend("</"+n.tagName+">")}t.__esModule=!0,t.default=function(i,n,s){function r(){var e,t,n,r,o=(t=s,n=(e=i).stream,r=u(t()),e.stream=n,r);o&&a[o.type]&&a[o.type](o)}var e,o=((e=[]).last=function(){return this[this.length-1]},e.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},e.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1},e),a={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&o.lastTagNameEq("TABLE")?(i.prepend("<TBODY>"),r()):n.selfCloseFix&&l.test(t)&&o.containsTagName(t)?o.lastTagNameEq(t)?c(i,o):(i.prepend("</"+e.tagName+">"),r()):e.unary||o.push(e)},endTag:function(e){o.last()?n.tagSoupFix&&!o.lastTagNameEq(e.tagName)?c(i,o):o.pop():n.tagSoupFix&&(s(),r())}};return function(){return r(),u(s())}};var n=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,l=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i}])},"object"===(void 0===n?"undefined":o(n))&&"object"===(void 0===t?"undefined":o(t))?t.exports=r():"object"===(void 0===n?"undefined":o(n))?n.Prescribe=r():(void 0).Prescribe=r()},{}],30:[function(e,t,n){"use strict";function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(){v&&h&&(v=!1,h.length?d=h.concat(d):m=-1,d.length&&a())}function a(){if(!v){var e=i(s);v=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,v=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,d=[],v=!1,m=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new u(e,t)),1!==d.length||v||i(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(e){return[]},p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],31:[function(u,e,c){(function(e,t){"use strict";function n(e,t){this._id=e,this._clearFn=t}var r=u("process/browser.js").nextTick,o=Function.prototype.apply,i=Array.prototype.slice,s={},a=0;c.setTimeout=function(){return new n(o.call(setTimeout,window,arguments),clearTimeout)},c.setInterval=function(){return new n(o.call(setInterval,window,arguments),clearInterval)},c.clearTimeout=c.clearInterval=function(e){e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},c.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},c.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},c._unrefActive=c.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},c.setImmediate="function"==typeof e?e:function(e){var t=a++,n=!(arguments.length<2)&&i.call(arguments,1);return s[t]=!0,r(function(){s[t]&&(n?e.apply(null,n):e.call(null),c.clearImmediate(t))}),t},c.clearImmediate="function"==typeof t?t:function(e){delete s[e]}}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":30,timers:31}],32:[function(e,t,n){"use strict";var r=e("./vdom/create-element.js");t.exports=r},{"./vdom/create-element.js":37}],33:[function(e,t,n){"use strict";var r=e("./vtree/diff.js");t.exports=r},{"./vtree/diff.js":60}],34:[function(e,t,n){"use strict";var r=e("./virtual-hyperscript/index.js");t.exports=r},{"./virtual-hyperscript/index.js":45}],35:[function(e,t,n){"use strict";var r=e("./vdom/patch.js");t.exports=r},{"./vdom/patch.js":40}],36:[function(e,t,n){"use strict";function i(e,t,n,r){if(r){var o=r[t];if(a(o))o.unhook&&o.unhook(e,t,n);else if("attributes"===t)for(var i in o)e.removeAttribute(i);else if("style"===t)for(var s in o)e.style[s]="";else e[t]="string"==typeof o?"":null}}function s(e,t,n,r,o){var i=n?n[r]:void 0;if("attributes"!==r){if(i&&p(i)&&f(i)!==f(o))return void(e[r]=o);p(e[r])||(e[r]={});var s="style"===r?"":void 0;for(var a in o){var u=o[a];e[r][a]=void 0===u?s:u}}else for(var c in o){var l=o[c];void 0===l?e.removeAttribute(c):e.setAttribute(c,l)}}function f(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var p=e("is-object"),a=e("../vnode/is-vhook.js");t.exports=function(e,t,n){for(var r in t){var o=t[r];void 0===o?i(e,r,o,n):a(o)?(i(e,r,o,n),o.hook&&o.hook(e,r,n?n[r]:void 0)):p(o)?s(e,0,n,r,o):e[r]=o}}},{"../vnode/is-vhook.js":51,"is-object":21}],37:[function(e,t,n){"use strict";var l=e("global/document"),f=e("./apply-properties"),p=e("../vnode/is-vnode.js"),h=e("../vnode/is-vtext.js"),d=e("../vnode/is-widget.js"),v=e("../vnode/handle-thunk.js");t.exports=function e(t,n){var r=n&&n.document||l,o=n?n.warn:null;if(t=v(t).a,d(t))return t.init();if(h(t))return r.createTextNode(t.text);if(!p(t))return o&&o("Item is not a valid virtual dom node",t),null;var i=null===t.namespace?r.createElement(t.tagName):r.createElementNS(t.namespace,t.tagName),s=t.properties;f(i,s);for(var a=t.children,u=0;u<a.length;u++){var c=e(a[u],n);c&&i.appendChild(c)}return i}},{"../vnode/handle-thunk.js":49,"../vnode/is-vnode.js":52,"../vnode/is-vtext.js":53,"../vnode/is-widget.js":54,"./apply-properties":36,"global/document":18}],38:[function(e,t,n){"use strict";function f(e,t,n){if(0===e.length)return!1;for(var r,o,i=0,s=e.length-1;i<=s;){if(o=e[r=(s+i)/2>>0],i===s)return t<=o&&o<=n;if(o<t)i=r+1;else{if(!(n<o))return!0;s=r-1}}return!1}function o(e,t){return t<e?1:-1}var p={};t.exports=function(e,t,n,r){return n&&0!==n.length?(n.sort(o),function e(t,n,r,o,i){if(o=o||{},t){f(r,i,i)&&(o[i]=t);var s=n.children;if(s)for(var a=t.childNodes,u=0;u<n.children.length;u++){i+=1;var c=s[u]||p,l=i+(c.count||0);f(r,i,l)&&e(a[u],c,r,o,i),i=l}}return o}(e,t,n,r,0)):{}}},{}],39:[function(e,t,n){"use strict";function w(e,t){"function"==typeof t.destroy&&r(t)&&t.destroy(e)}var k=e("./apply-properties"),r=e("../vnode/is-widget.js"),_=e("../vnode/vpatch.js"),x=e("./update-widget");t.exports=function(e,t,n){var r,o,i,s,a,u,c,l,f,p,h,d,v,m,y=e.type,g=e.vNode,b=e.patch;switch(y){case _.REMOVE:return v=g,(m=(d=t).parentNode)&&m.removeChild(d),w(d,v),null;case _.INSERT:return l=t,f=b,h=(p=n).render(f,p),l&&l.appendChild(h),l;case _.VTEXT:return function(e,t,n,r){var o;if(3===e.nodeType)e.replaceData(0,e.length,n.text),o=e;else{var i=e.parentNode;o=r.render(n,r),i&&o!==e&&i.replaceChild(o,e)}return o}(t,0,b,n);case _.WIDGET:return function(e,t,n,r){var o,i=x(t,n);o=i?n.update(t,e)||e:r.render(n,r);var s=e.parentNode;return s&&o!==e&&s.replaceChild(o,e),i||w(e,t),o}(t,g,b,n);case _.VNODE:return s=b,a=n,u=(i=t).parentNode,c=a.render(s,a),u&&c!==i&&u.replaceChild(c,i),c;case _.ORDER:return function(e,t){for(var n,r,o,i=e.childNodes,s={},a=0;a<t.removes.length;a++)r=t.removes[a],n=i[r.from],r.key&&(s[r.key]=n),e.removeChild(n);for(var u=i.length,c=0;c<t.inserts.length;c++)o=t.inserts[c],n=s[o.key],e.insertBefore(n,o.to>=u++?null:i[o.to])}(t,b),t;case _.PROPS:return k(t,b,g.properties),t;case _.THUNK:return r=t,o=n.patch(t,b,n),r&&o&&r!==o&&r.parentNode&&r.parentNode.replaceChild(o,r),o;default:return t}}},{"../vnode/is-widget.js":54,"../vnode/vpatch.js":57,"./apply-properties":36,"./update-widget":41}],40:[function(e,t,n){"use strict";function o(e,t,n){var r=function(e){var t=[];for(var n in e)"a"!==n&&t.push(Number(n));return t}(t);if(0===r.length)return e;var o=l(e,t.a,r),i=e.ownerDocument;n.document||i===c||(n.document=i);for(var s=0;s<r.length;s++){var a=r[s];e=u(e,o[a],t[a],n)}return e}function u(e,t,n,r){if(!t)return e;var o;if(s(n))for(var i=0;i<n.length;i++)o=a(n[i],t,r),t===e&&(e=o);else o=a(n,t,r),t===e&&(e=o);return e}var c=e("global/document"),s=e("x-is-array"),i=e("./create-element"),l=e("./dom-index"),a=e("./patch-op");t.exports=function e(t,n,r){return(r=r||{}).patch=r.patch&&r.patch!==e?r.patch:o,r.render=r.render||i,r.patch(t,n,r)}},{"./create-element":37,"./dom-index":38,"./patch-op":39,"global/document":18,"x-is-array":61}],41:[function(e,t,n){"use strict";var r=e("../vnode/is-widget.js");t.exports=function(e,t){return!(!r(e)||!r(t))&&("name"in e&&"name"in t?e.id===t.id:e.init===t.init)}},{"../vnode/is-widget.js":54}],42:[function(e,t,n){"use strict";function r(e,t){if(!(this instanceof r))return new r(e,t);this.namespace=e,this.value=t}(t.exports=r).prototype.hook=function(e,t,n){n&&"AttributeHook"===n.type&&n.value===this.value&&n.namespace===this.namespace||e.setAttributeNS(this.namespace,t,this.value)},r.prototype.unhook=function(e,t,n){if(!n||"AttributeHook"!==n.type||n.namespace!==this.namespace){var r=t.indexOf(":"),o=-1<r?t.substr(r+1):t;e.removeAttributeNS(this.namespace,o)}},r.prototype.type="AttributeHook"},{}],43:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.value=e}var o=e("ev-store");(t.exports=r).prototype.hook=function(e,t){o(e)[t.substr(3)]=this.value},r.prototype.unhook=function(e,t){o(e)[t.substr(3)]=void 0}},{"ev-store":14}],44:[function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.value=e}(t.exports=r).prototype.hook=function(e,t){e[t]!==this.value&&(e[t]=this.value)}},{}],45:[function(e,t,n){"use strict";function c(e){return r(e)||o(e)||i(e)||s(e)}function l(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}var f=e("x-is-array"),p=e("../vnode/vnode.js"),h=e("../vnode/vtext.js"),r=e("../vnode/is-vnode"),o=e("../vnode/is-vtext"),i=e("../vnode/is-widget"),d=e("../vnode/is-vhook"),s=e("../vnode/is-thunk"),v=e("./parse-tag.js"),m=e("./hooks/soft-set-hook.js"),y=e("./hooks/ev-hook.js");t.exports=function(e,t,n){var r,o,i,s,a,u=[];return!n&&("string"==typeof(a=t)||f(a)||c(a))&&(n=t,o={}),r=v(e,o=o||t||{}),o.hasOwnProperty("key")&&(i=o.key,o.key=void 0),o.hasOwnProperty("namespace")&&(s=o.namespace,o.namespace=void 0),"INPUT"!==r||s||!o.hasOwnProperty("value")||void 0===o.value||d(o.value)||(o.value=m(o.value)),function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if(d(n))continue;"ev-"===t.substr(0,3)&&(e[t]=y(n))}}(o),null!=n&&function e(t,n,r,o){if("string"==typeof t)n.push(new h(t));else if("number"==typeof t)n.push(new h(String(t)));else if(c(t))n.push(t);else{if(!f(t)){if(null==t)return;throw s={foreignObject:t,parentVnode:{tagName:r,properties:o}},(a=new Error).type="virtual-hyperscript.unexpected.virtual-element",a.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+l(s.foreignObject)+".\nThe parent vnode is:\n"+l(s.parentVnode),a.foreignObject=s.foreignObject,a.parentVnode=s.parentVnode,a}for(var i=0;i<t.length;i++)e(t[i],n,r,o)}var s,a}(n,u,r,o),new p(r,o,u,i,s)}},{"../vnode/is-thunk":50,"../vnode/is-vhook":51,"../vnode/is-vnode":52,"../vnode/is-vtext":53,"../vnode/is-widget":54,"../vnode/vnode.js":56,"../vnode/vtext.js":58,"./hooks/ev-hook.js":43,"./hooks/soft-set-hook.js":44,"./parse-tag.js":46,"x-is-array":61}],46:[function(e,t,n){"use strict";var c=e("browser-split"),l=/([\.#]?[a-zA-Z0-9\u007F-\uFFFF_:-]+)/,f=/^\.|#/;t.exports=function(e,t){if(!e)return"DIV";var n,r,o,i,s=!t.hasOwnProperty("id"),a=c(e,l),u=null;for(f.test(a[1])&&(u="DIV"),i=0;i<a.length;i++)(r=a[i])&&(o=r.charAt(0),u?"."===o?(n=n||[]).push(r.substring(1,r.length)):"#"===o&&s&&(t.id=r.substring(1,r.length)):u=r);return n&&(t.className&&n.push(t.className),t.className=n.join(" ")),t.namespace?u:u.toUpperCase()}},{"browser-split":6}],47:[function(e,t,n){"use strict";var r=null,o="http://www.w3.org/1999/xlink",i="http://www.w3.org/XML/1998/namespace",s={about:r,"accent-height":r,accumulate:r,additive:r,"alignment-baseline":r,alphabetic:r,amplitude:r,"arabic-form":r,ascent:r,attributeName:r,attributeType:r,azimuth:r,bandwidth:r,baseFrequency:r,baseProfile:r,"baseline-shift":r,bbox:r,begin:r,bias:r,by:r,calcMode:r,"cap-height":r,class:r,clip:r,"clip-path":r,"clip-rule":r,clipPathUnits:r,color:r,"color-interpolation":r,"color-interpolation-filters":r,"color-profile":r,"color-rendering":r,content:r,contentScriptType:r,contentStyleType:r,cursor:r,cx:r,cy:r,d:r,datatype:r,defaultAction:r,descent:r,diffuseConstant:r,direction:r,display:r,divisor:r,"dominant-baseline":r,dur:r,dx:r,dy:r,edgeMode:r,editable:r,elevation:r,"enable-background":r,end:r,"ev:event":"http://www.w3.org/2001/xml-events",event:r,exponent:r,externalResourcesRequired:r,fill:r,"fill-opacity":r,"fill-rule":r,filter:r,filterRes:r,filterUnits:r,"flood-color":r,"flood-opacity":r,focusHighlight:r,focusable:r,"font-family":r,"font-size":r,"font-size-adjust":r,"font-stretch":r,"font-style":r,"font-variant":r,"font-weight":r,format:r,from:r,fx:r,fy:r,g1:r,g2:r,"glyph-name":r,"glyph-orientation-horizontal":r,"glyph-orientation-vertical":r,glyphRef:r,gradientTransform:r,gradientUnits:r,handler:r,hanging:r,height:r,"horiz-adv-x":r,"horiz-origin-x":r,"horiz-origin-y":r,id:r,ideographic:r,"image-rendering":r,in:r,in2:r,initialVisibility:r,intercept:r,k:r,k1:r,k2:r,k3:r,k4:r,kernelMatrix:r,kernelUnitLength:r,kerning:r,keyPoints:r,keySplines:r,keyTimes:r,lang:r,lengthAdjust:r,"letter-spacing":r,"lighting-color":r,limitingConeAngle:r,local:r,"marker-end":r,"marker-mid":r,"marker-start":r,markerHeight:r,markerUnits:r,markerWidth:r,mask:r,maskContentUnits:r,maskUnits:r,mathematical:r,max:r,media:r,mediaCharacterEncoding:r,mediaContentEncodings:r,mediaSize:r,mediaTime:r,method:r,min:r,mode:r,name:r,"nav-down":r,"nav-down-left":r,"nav-down-right":r,"nav-left":r,"nav-next":r,"nav-prev":r,"nav-right":r,"nav-up":r,"nav-up-left":r,"nav-up-right":r,numOctaves:r,observer:r,offset:r,opacity:r,operator:r,order:r,orient:r,orientation:r,origin:r,overflow:r,overlay:r,"overline-position":r,"overline-thickness":r,"panose-1":r,path:r,pathLength:r,patternContentUnits:r,patternTransform:r,patternUnits:r,phase:r,playbackOrder:r,"pointer-events":r,points:r,pointsAtX:r,pointsAtY:r,pointsAtZ:r,preserveAlpha:r,preserveAspectRatio:r,primitiveUnits:r,propagate:r,property:r,r:r,radius:r,refX:r,refY:r,rel:r,"rendering-intent":r,repeatCount:r,repeatDur:r,requiredExtensions:r,requiredFeatures:r,requiredFonts:r,requiredFormats:r,resource:r,restart:r,result:r,rev:r,role:r,rotate:r,rx:r,ry:r,scale:r,seed:r,"shape-rendering":r,slope:r,snapshotTime:r,spacing:r,specularConstant:r,specularExponent:r,spreadMethod:r,startOffset:r,stdDeviation:r,stemh:r,stemv:r,stitchTiles:r,"stop-color":r,"stop-opacity":r,"strikethrough-position":r,"strikethrough-thickness":r,string:r,stroke:r,"stroke-dasharray":r,"stroke-dashoffset":r,"stroke-linecap":r,"stroke-linejoin":r,"stroke-miterlimit":r,"stroke-opacity":r,"stroke-width":r,surfaceScale:r,syncBehavior:r,syncBehaviorDefault:r,syncMaster:r,syncTolerance:r,syncToleranceDefault:r,systemLanguage:r,tableValues:r,target:r,targetX:r,targetY:r,"text-anchor":r,"text-decoration":r,"text-rendering":r,textLength:r,timelineBegin:r,title:r,to:r,transform:r,transformBehavior:r,type:r,typeof:r,u1:r,u2:r,"underline-position":r,"underline-thickness":r,unicode:r,"unicode-bidi":r,"unicode-range":r,"units-per-em":r,"v-alphabetic":r,"v-hanging":r,"v-ideographic":r,"v-mathematical":r,values:r,version:r,"vert-adv-y":r,"vert-origin-x":r,"vert-origin-y":r,viewBox:r,viewTarget:r,visibility:r,width:r,widths:r,"word-spacing":r,"writing-mode":r,x:r,"x-height":r,x1:r,x2:r,xChannelSelector:r,"xlink:actuate":o,"xlink:arcrole":o,"xlink:href":o,"xlink:role":o,"xlink:show":o,"xlink:title":o,"xlink:type":o,"xml:base":i,"xml:id":i,"xml:lang":i,"xml:space":i,y:r,y1:r,y2:r,yChannelSelector:r,z:r,zoomAndPan:r};t.exports=function(e){if(s.hasOwnProperty(e))return s[e]}},{}],48:[function(e,t,n){"use strict";var u=e("x-is-array"),c=e("./index.js"),l=e("./svg-attribute-namespace"),f=e("./hooks/attribute-hook");t.exports=function(e,t,n){var r;!n&&("string"==typeof(r=t)||u(r))&&(n=t,t={}),(t=t||{}).namespace="http://www.w3.org/2000/svg";var o=t.attributes||(t.attributes={});for(var i in t)if(t.hasOwnProperty(i)){var s=l(i);if(void 0!==s){var a=t[i];"string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a||(t[i]=null===s?void(o[i]=a):f(s,a))}}return c(e,t,n)}},{"./hooks/attribute-hook":42,"./index.js":45,"./svg-attribute-namespace":47,"x-is-array":61}],49:[function(e,t,n){"use strict";function o(e,t){var n=e.vnode;if(n||(n=e.vnode=e.render(t)),!(r(n)||i(n)||s(n)))throw new Error("thunk did not return a valid node");return n}var r=e("./is-vnode"),i=e("./is-vtext"),s=e("./is-widget"),a=e("./is-thunk");t.exports=function(e,t){var n=e,r=t;return a(t)&&(r=o(t,e)),a(e)&&(n=o(e,null)),{a:n,b:r}}},{"./is-thunk":50,"./is-vnode":52,"./is-vtext":53,"./is-widget":54}],50:[function(e,t,n){"use strict";t.exports=function(e){return e&&"Thunk"===e.type}},{}],51:[function(e,t,n){"use strict";t.exports=function(e){return e&&("function"==typeof e.hook&&!e.hasOwnProperty("hook")||"function"==typeof e.unhook&&!e.hasOwnProperty("unhook"))}},{}],52:[function(e,t,n){"use strict";var r=e("./version");t.exports=function(e){return e&&"VirtualNode"===e.type&&e.version===r}},{"./version":55}],53:[function(e,t,n){"use strict";var r=e("./version");t.exports=function(e){return e&&"VirtualText"===e.type&&e.version===r}},{"./version":55}],54:[function(e,t,n){"use strict";t.exports=function(e){return e&&"Widget"===e.type}},{}],55:[function(e,t,n){"use strict";t.exports="2"},{}],56:[function(e,t,n){"use strict";function r(e,t,n,r,o){this.tagName=e,this.properties=t||b,this.children=n||w,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof o?o:null;var i,s=n&&n.length||0,a=0,u=!1,c=!1,l=!1;for(var f in t)if(t.hasOwnProperty(f)){var p=t[f];g(p)&&p.unhook&&(i||(i={}),i[f]=p)}for(var h=0;h<s;h++){var d=n[h];v(d)?(a+=d.count||0,!u&&d.hasWidgets&&(u=!0),!c&&d.hasThunks&&(c=!0),l||!d.hooks&&!d.descendantHooks||(l=!0)):!u&&m(d)?"function"==typeof d.destroy&&(u=!0):!c&&y(d)&&(c=!0)}this.count=s+a,this.hasWidgets=u,this.hasThunks=c,this.hooks=i,this.descendantHooks=l}var o=e("./version"),v=e("./is-vnode"),m=e("./is-widget"),y=e("./is-thunk"),g=e("./is-vhook");t.exports=r;var b={},w=[];r.prototype.version=o,r.prototype.type="VirtualNode"},{"./is-thunk":50,"./is-vhook":51,"./is-vnode":52,"./is-widget":54,"./version":55}],57:[function(e,t,n){"use strict";function r(e,t,n){this.type=Number(e),this.vNode=t,this.patch=n}var o=e("./version");r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,(t.exports=r).prototype.version=o,r.prototype.type="VirtualPatch"},{"./version":55}],58:[function(e,t,n){"use strict";function r(e){this.text=String(e)}var o=e("./version");(t.exports=r).prototype.version=o,r.prototype.type="VirtualText"},{"./version":55}],59:[function(e,t,n){"use strict";function c(e){return Object.getPrototypeOf?Object.getPrototypeOf(e):e.__proto__?e.__proto__:e.constructor?e.constructor.prototype:void 0}var l=e("is-object"),f=e("../vnode/is-vhook");t.exports=function e(t,n){var r;for(var o in t){o in n||((r=r||{})[o]=void 0);var i=t[o],s=n[o];if(i!==s)if(l(i)&&l(s))if(c(s)!==c(i))(r=r||{})[o]=s;else if(f(s))(r=r||{})[o]=s;else{var a=e(i,s);a&&((r=r||{})[o]=a)}else(r=r||{})[o]=s}for(var u in n)u in t||((r=r||{})[u]=n[u]);return r}},{"../vnode/is-vhook":51,"is-object":21}],60:[function(e,t,n){"use strict";function s(e,t){var n={a:e};return d(e,t,n,0),n}function d(e,t,n,r){if(e!==t){var o=n[r],i=!1;if(p(e)||p(t))u(e,t,n,r);else if(null==t)f(e)||(a(e,n,r),o=n[r]),o=v(o,new m(m.REMOVE,e,t));else if(y(t))if(y(e))if(e.tagName===t.tagName&&e.namespace===t.namespace&&e.key===t.key){var s=g(e.properties,t.properties);s&&(o=v(o,new m(m.PROPS,e,s))),o=function(e,t,n,r,o){for(var i=e.children,s=function(e,t){var n=P(t),r=n.keys,o=n.free;if(o.length===t.length)return{children:t,moves:null};var i=P(e),s=i.keys;if(i.free.length===e.length)return{children:t,moves:null};for(var a=[],u=0,c=o.length,l=0,f=0;f<e.length;f++){var p,h=e[f];h.key?r.hasOwnProperty(h.key)?(p=r[h.key],a.push(t[p])):(p=f-l++,a.push(null)):u<c?(p=o[u++],a.push(t[p])):(p=f-l++,a.push(null))}for(var d=u>=o.length?t.length:o[u],v=0;v<t.length;v++){var m=t[v];m.key?s.hasOwnProperty(m.key)||a.push(m):d<=v&&a.push(m)}for(var y,g=a.slice(),b=0,w=[],k=[],_=0;_<t.length;){var x=t[_];for(y=g[b];null===y&&g.length;)w.push(O(g,b,null)),y=g[b];y&&y.key===x.key?(b++,_++):x.key?(y&&y.key&&r[y.key]!==_+1?(w.push(O(g,b,y.key)),(y=g[b])&&y.key===x.key?b++:k.push({key:x.key,to:_})):k.push({key:x.key,to:_}),_++):y&&y.key&&w.push(O(g,b,y.key))}for(;b<g.length;)y=g[b],w.push(O(g,b,y&&y.key));return w.length!==l||k.length?{children:a,moves:{removes:w,inserts:k}}:{children:a,moves:null}}(i,t.children),a=s.children,u=i.length,c=a.length,l=c<u?u:c,f=0;f<l;f++){var p=i[f],h=a[f];o+=1,p?d(p,h,n,o):h&&(r=v(r,new m(m.INSERT,null,h))),y(p)&&p.count&&(o+=p.count)}return s.moves&&(r=v(r,new m(m.ORDER,e,s.moves))),r}(e,t,n,o,r)}else o=v(o,new m(m.VNODE,e,t)),i=!0;else o=v(o,new m(m.VNODE,e,t)),i=!0;else l(t)?l(e)?e.text!==t.text&&(o=v(o,new m(m.VTEXT,e,t))):(o=v(o,new m(m.VTEXT,e,t)),i=!0):f(t)&&(f(e)||(i=!0),o=v(o,new m(m.WIDGET,e,t)));o&&(n[r]=o),i&&a(e,n,r)}}function a(e,t,n){(function e(t,n,r){if(y(t)){if(t.hooks&&(n[r]=v(n[r],new m(m.PROPS,t,c(t.hooks)))),t.descendantHooks||t.hasThunks)for(var o=t.children,i=o.length,s=0;s<i;s++){var a=o[s];e(a,n,r+=1),y(a)&&a.count&&(r+=a.count)}}else p(t)&&u(t,null,n,r)})(e,t,n),function e(t,n,r){if(f(t))"function"==typeof t.destroy&&(n[r]=v(n[r],new m(m.REMOVE,t,null)));else if(y(t)&&(t.hasWidgets||t.hasThunks))for(var o=t.children,i=o.length,s=0;s<i;s++){var a=o[s];e(a,n,r+=1),y(a)&&a.count&&(r+=a.count)}else p(t)&&u(t,null,n,r)}(e,t,n)}function u(e,t,n,r){var o=h(e,t),i=s(o.a,o.b);(function(e){for(var t in e)if("a"!==t)return!0;return!1})(i)&&(n[r]=new m(m.THUNK,null,i))}function c(e){var t={};for(var n in e)t[n]=void 0;return t}function O(e,t,n){return e.splice(t,1),{from:t,key:n}}function P(e){for(var t={},n=[],r=e.length,o=0;o<r;o++){var i=e[o];i.key?t[i.key]=o:n.push(o)}return{keys:t,free:n}}function v(e,t){return e?(r(e)?e.push(t):e=[e,t],e):t}var r=e("x-is-array"),m=e("../vnode/vpatch"),y=e("../vnode/is-vnode"),l=e("../vnode/is-vtext"),f=e("../vnode/is-widget"),p=e("../vnode/is-thunk"),h=e("../vnode/handle-thunk"),g=e("./diff-props");t.exports=s},{"../vnode/handle-thunk":49,"../vnode/is-thunk":50,"../vnode/is-vnode":52,"../vnode/is-vtext":53,"../vnode/is-widget":54,"../vnode/vpatch":57,"./diff-props":59,"x-is-array":61}],61:[function(e,t,n){"use strict";var r=Array.isArray,o=Object.prototype.toString;t.exports=r||function(e){return"[object Array]"===o.call(e)}},{}],62:[function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("style");return n.setAttribute("type","text/css"),document.head.appendChild(n),n.id=e,n.classList.add(t),n}var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("document-ready-promise")(),a=e("object.defaults/immutable"),u=e("mixwith-es5").mix,l=e("./event-emitter-mixin"),f=e("virtual-dom/patch"),p=e("virtual-dom/diff"),h=e("virtual-dom/h"),d={childStylesFirst:!0,verbosity:0},v=function(e){function o(e){var t;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,o),e=a(e,d);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e));n.styles=e.styles||n.constructor.styles,n.renderOrder=["markup","styles"],n.pipelineInitMethods=e.pipelineInitMethods,n.componentInitOpts=Array.isArray(e.Component)?e.Component[1]:{},n.shouldRender={},n.childStylesFirst=e.childStylesFirst,Object.defineProperties(n,(i(t={Component:{value:n.constructor.Weddell.classes.Component.makeComponentClass(Array.isArray(e.Component)?e.Component[0]:e.Component)},component:{get:function(){return n._component}},el:{get:function(){return n._el}},_liveWidget:{value:null,writable:!0},_lastPatchStartTime:{value:Date.now(),writable:!0},_el:{value:null,writable:!0},_elInput:{value:e.el},_patchPromise:{value:null,writable:!0},patchPromise:{get:function(){return n._patchPromise}},_RAFCallback:{value:null,writable:!0},_patchRequests:{value:[],writable:!0}},"_patchPromise",{value:null,writable:!0}),i(t,"_component",{value:null,writable:!0}),i(t,"_widget",{value:h("div"),writable:!0}),t));var r=n.constructor.Weddell.consts;if(!n.Component)throw"There is no base component set for this app. Can't mount.";if(r.VAR_NAME in window)throw r.VAR_NAME,"on window object. Aborting.";return Object.defineProperty(window,r.VAR_NAME,{value:{app:n,components:{}}}),0<e.verbosity&&e.styles&&console.warn("You are using deprecated syntax: opts.styles on the app are no longer supported. Use static getter"),Object.defineProperties(n,{rootNode:{value:document.createElement("div"),writable:!0}}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,u(v).with(l)),r(o,null,[{key:"patchMethods",get:function(){return["patchDOM","patchStyles"]}}]),r(o,[{key:"onPatch",value:function(){}},{key:"patchDOM",value:function(e){this.rootNode.parentNode||this.el.appendChild(this.rootNode),this.component.refreshWidgets();var t=p(this._widget,this.component._widget),n=f(this.rootNode,t);this.rootNode=n,this._widget=this.component._widget,this.trigger("patchdom")}},{key:"patchStyles",value:function(e){var o,i,s=e.reduceRight(function(e,t){return t.classId in e.classes||(e.classes[t.classId]=t),t.id in e.components||(e.components[t.id]=t),e},{classes:{},components:{}}),a=[],u={};this.component.walkComponents(function(e){var n=e.id,r=n in s.components,t=r?s.components[n].results.renderStyles:e._renderCache.renderStyles,o=function(e,t){return Object.assign(Object.create(null,{styles:{get:function(){return t?t[e]:null}}}),{id:n,needsPatch:r})};a.push(o("dynamicStyles",t)),(n=e.constructor.id)in u||(t=(r=n in s.classes)?s.classes[n].results.renderStyles:e._renderCache.renderStyles,u[n]=o("staticStyles",t))},function(e){return e.isMounted}),(u=Object.values(u)).concat(a).reduce(function(e,t){var n,r=e.findIndex(function(e){return e.id==="weddell-style-"+t.id});if(!t.needsPatch){if(-1<r?n=e.splice(r,1)[0]:(i=t.styles)&&((n=c("weddell-style-"+t.id,"weddell-style")).textContent=t.styles),o&&n)o.compareDocumentPosition(n)!==Node.DOCUMENT_POSITION_FOLLOWING&&o.parentNode.insertBefore(n,o.nextSibling);return n&&(o=n),e}if(!(i=t.styles||""))return-1<r&&e.splice(r,1),e;(n=-1<r?e.splice(r,1)[0]:c("weddell-style-"+t.id,"weddell-style"),o)&&(o.compareDocumentPosition(n)!==Node.DOCUMENT_POSITION_FOLLOWING&&o.parentNode.insertBefore(n,o.nextSibling));return(o=n).textContent!==i&&(n.textContent=i),e},Array.from(document.querySelectorAll("head style.weddell-style"))).forEach(function(e){document.head.removeChild(e)}),this.trigger("patchstyles")}},{key:"makeComponent",value:function(){var e=new this.Component({isRoot:!0});return e.assignProps(Object.values(this.el.attributes).reduce(function(e,t){return e[t.name]=t.value,e},{})),e}},{key:"queuePatch",value:function(){var t,r=this,e=new Promise(function(e){t=e}).then(function(n){return r.constructor.patchMethods.reduce(function(e,t){return e.then(function(){return r[t](n)})},Promise.resolve()).then(function(){if(r._patchRequests.length)return Promise.reject("Rerender")}).then(function(){return r._patchPromise=null,r.trigger("patch"),r.onPatch()},function(e){if("Rerender"===e)return r.queuePatch();console.error("Error patching:",e.stack)})}),n=Date.now()-this._lastPatchStartTime;return this._lastPatchStartTime=Date.now(),window.setTimeout(function(){requestAnimationFrame(r._RAFCallback=function(){r._RAFCallback=null;var e=r._patchRequests;r._patchRequests=[],t(e)})},Math.max(0,33.334-n)),e}},{key:"awaitPatch",value:function(){return this.patchPromise||Promise.resolve()}},{key:"awaitNextPatch",value:function(){var e=this;return this.patchPromise||this.component.awaitEvent("requestpatch").then(function(){return e.patchPromise})}},{key:"initPatchers",value:function(){var e=this._elInput;if("string"==typeof e&&!(e=document.querySelector(e)))throw new Error("Could not mount an element using provided query.");this._el=e,this.styles&&(c("weddell-app-styles").textContent=this.styles)}},{key:"init",value:function(){var t=this;return s.then(function(){return t.initPatchers(),t._component=t.makeComponent(),t.trigger("createcomponent",{component:t.component}),t.trigger("createrootcomponent",{component:t.component}),t.component.on("createcomponent",function(e){return t.trigger("createcomponent",Object.assign({},e))}),t.component.on("requestpatch",function(e){t._patchRequests=t._patchRequests.concat(e),t._patchPromise||(t._patchPromise=t.queuePatch())}),t.on("patch",function(){t.component.trigger("patch")}),Object.seal(t),t.component.init(t.componentInitOpts).then(function(){return t.component.mount()}).then(function(){return t.awaitPatch().then(function(){t.el.classList.add("first-markup-render-complete","first-styles-render-complete","first-render-complete")})})})}}]),o}();t.exports=v},{"./event-emitter-mixin":64,"document-ready-promise":13,"mixwith-es5":23,"object.defaults/immutable":25,"virtual-dom/diff":33,"virtual-dom/h":34,"virtual-dom/patch":35}],63:[function(e,t,n){"use strict";function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),r=e("./event-emitter-mixin"),h=e("object.defaults/immutable"),d=e("../utils/make-hash"),i=e("mixwith-es5").mix,s=e("virtual-dom/h"),v=e("./vdom-widget"),m=e("deep-equal"),y=e("../utils/clone-vnode"),g=e("../utils/flatten"),b=e("../utils/compact"),w=e("../utils/uniq"),k=e("../utils/difference"),_={store:{},inputs:null,isRoot:!1},x={},O={},P=document.createElement("div"),j=function(e){function a(e){c(this,a),e=h(e,_);var n=l(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e)),t=window[n.constructor.Weddell.consts.VAR_NAME],r=n.constructor.Weddell.classes.Store;0<t.verbosity&&e.inputs&&console.warn("you are using outdated syntax! opts.inputs is deprecated in favor of static getter."),Object.defineProperties(n,{id:{get:function(){return n._id}},isRoot:{value:e.isRoot},_content:{value:[],writable:!0},content:{get:function(){return n._content},set:function(e){var t=n._content;n._content=e,m(t,e)||n.markDirty()}},hasMounted:{get:function(){return n._hasMounted}},isMounted:{get:function(){return n._isMounted}},renderPromise:{get:function(){return n._renderPromise}},childComponents:{get:function(){return n._childComponents}},contentComponents:{get:function(){return n._contentComponents}},hasRendered:{get:function(){return n._hasRendered}},el:{get:function(){return n._el}},isInit:{get:function(){return n._isInit}},defaultInitOpts:{value:h(e.defaultInitOpts,x)},root:{value:e.isRoot?n:e.root},inputs:{value:b(n.constructor.inputs||e.inputs||[])},renderers:{value:{}},_el:{value:null,writable:!0},_lastRenderTimeStamps:{value:n.constructor.renderMethods.reduce(function(e,t){return Object.assign(e,u({},t,null))},{})},_lastAccessedStateKeys:{value:n.constructor.renderMethods.reduce(function(e,t){return Object.assign(e,u({},t,[]))},{})},_dirtyRenderers:{value:!0,writable:!0},_contentComponents:{value:[],writable:!0},_inlineEventHandlers:{writable:!0,value:{}},_isMounted:{writable:!0,value:null},_lastRenderedComponents:{writable:!0,value:null},_childComponents:{writable:!0,value:{}},_componentsRequestingPatch:{writable:!0,value:[]},_renderPromise:{writable:!0,value:null},_hasMounted:{writable:!0,value:!1},_hasRendered:{writable:!0,value:!1},_widgetIsDirty:{writable:!0,value:!1},_vTree:{writable:!0,value:null},_prevVTree:{writable:!0,value:null},_widget:{writable:!0,value:new v({component:n,childWidgets:{}})},_prevWidget:{writable:!0,value:null},_dirtyWidgets:{writable:!0,value:{}},_renderCache:{value:n.constructor.renderMethods.reduce(function(e,t){return Object.assign(e,u({},t,[]))},{})},_isInit:{writable:!0,value:!1},_id:{value:d()},_componentListenerCallbacks:{value:{},writable:!0}});var o=n.constructor._inputMappings?Object.entries(n.constructor._inputMappings).filter(function(t){return n.inputs.find(function(e){return e===t[0]||e.key===t[0]})}).reduce(function(e,t){return e[t[1]]=t[0],e},{}):{};Object.defineProperties(n,{props:{value:new r(n.inputs.map(function(e){return"string"==typeof e?e:e.key?e.key:null}),{shouldMonitorChanges:!0,extends:e.parentComponent?[e.parentComponent.props,e.parentComponent.state,e.parentComponent.store]:null,inputMappings:o,validators:n.inputs.filter(function(e){return"object"===(void 0===e?"undefined":p(e))}).reduce(function(e,t){return Object.assign(e,u({},t.key,{validator:t.validator,required:t.required}))},{}),shouldEvalFunctions:!1})},store:{value:new r(Object.assign({$bind:n.bindEvent.bind(n),$bindValue:n.bindEventValue.bind(n)},e.store),{shouldMonitorChanges:!1,shouldEvalFunctions:!1})}}),0<t.verbosity&&e.state&&console.warn("opts.state is deprecated in favor of static 'state' getter. Update your code!");var i=Object.assign({},e.state||{},n.constructor.state);Object.defineProperty(n,"state",{value:new r(h({$attributes:null,$id:function(){return n.id}},i),{overrides:[n.props],proxies:[n.store],transform:function(e,t){return n.constructor.hydrators&&n.constructor.hydrators[e]?n.constructor.hydrators[e](t):t}})}),0<t.verbosity&&e.components&&console.warn("opts.components is deprecated in favor of static 'components' getter. Please update your code.");var s=n.constructor.components||e.components||{};return Object.defineProperties(n,{_componentInstances:{value:Object.keys(s).map(function(e){return e.toLowerCase()}).reduce(function(e,t){return e[t]={},e},{})},_locals:{value:new r({},{proxies:[n.state,n.store],shouldMonitorChanges:!1,shouldEvalFunctions:!1})}}),Object.defineProperty(n,"components",{value:Object.entries(s).map(function(e){return[e[0].toLowerCase(),e[1]]}).reduce(function(e,t){return e[t[0]]=n.createChildComponentClass(t[0],t[1]),e},{})}),n.getParent=function(){return e.parentComponent||null},0<t.verbosity&&e.markupTemplate&&console.warn("You are using deprecated syntax. 'markupTemplate' will be removed in the next major version. Use static 'markup' getter."),0<t.verbosity&&e.stylesTemplate&&console.warn("You are using deprecated syntax. 'stylesTemplate' will be removed in the next major version. Use static 'styles' getter for static styles, and instance 'styles' for runtime templates."),n.vNodeTemplate=n.makeVNodeTemplate(n.constructor.markup,e.markupTemplate),n.stylesTemplate=n.makeStylesTemplate(n.constructor.dynamicStyles||e.stylesTemplate,n.constructor.styles),t.components[n._id]=n}return f(a,i(j).with(r)),o(a,null,[{key:"renderMethods",get:function(){return["renderVNode","renderStyles"]}},{key:"isWeddellComponent",get:function(){return!0}}]),o(a,[{key:"requestRender",value:function(e){var t=this,n=Date.now()-Object.values(this._lastRenderTimeStamps).reduce(function(e,t){return isNaN(t)?e:Math.max(t,e)},0);return!this.hasRendered||33.333<=n?this.render(e):this._renderPromise=new Promise(function(e){return setTimeout(e,33.333-n)}).then(function(){return t.render(e)})}},{key:"markDirty",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.renderPromise||!this.isMounted?(this._dirtyRenderers=Object.assign(this._dirtyRenderers||{},e),this.renderPromise):this.requestRender(e)}},{key:"render",value:function(){var r=this,e=(0<arguments.length&&void 0!==arguments[0]&&arguments[0],Promise.resolve().then(function(){return r.constructor.renderMethods.reduce(function(e,n){return e.then(function(t){return Promise.resolve(r[n]()).then(function(e){return Object.defineProperty(t,n,{get:function(){return e},enumerable:!0}),t})})},Promise.resolve({})).then(function(e){return Promise.resolve(e).then(function(e){if(r._dirtyRenderers){var t=r._dirtyRenderers;return r._dirtyRenderers=null,Promise.reject(t)}return e}).then(function(e){return r._renderPromise=null,r.requestPatch(e),e},function(e){return r.render(e)})},function(e){throw e}).then(function(e){return r.hasRendered?(r.trigger("render"),Promise.resolve(r.onRender()).then(function(){return e})):(r._hasRendered=!0,r.trigger("firstrender"),r.trigger("render"),Promise.all([r.onRender(),r.onFirstRender()]).then(function(){return e}))})}));return this._renderPromise?e:this._renderPromise=e}},{key:"onInit",value:function(){}},{key:"onFirstRender",value:function(){}},{key:"onRender",value:function(){}},{key:"onDOMCreate",value:function(){}},{key:"onDOMMove",value:function(){}},{key:"onDOMChange",value:function(){}},{key:"onDOMCreateOrChange",value:function(){}},{key:"onDOMDestroy",value:function(){}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}},{key:"onFirstMount",value:function(){}},{key:"onRenderMarkup",value:function(){}},{key:"onRenderStyles",value:function(){}},{key:"requestPatch",value:function(e){this.trigger("requestpatch",{results:e?Object.create(e):{},id:this.id,classId:this.constructor.id})}},{key:"makeVNodeTemplate",value:function(){var n=this;return Array.from(arguments).reduce(function(e,t){return e||"function"!=typeof t?e:n.wrapTemplate(t,"renderVNode",s)},null)}},{key:"makeStylesTemplate",value:function(n){var r=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";if("function"==typeof n);else if(n)throw new Error("Only functions are supported for dynamic styles for now.");if("string"!=typeof o)throw new Error("Only strings are supported for static component styles.");return this.wrapTemplate(function(e){var t=n?n.call(r,e):null;return Object.defineProperties({},{dynamicStyles:{get:function(){return t}},staticStyles:{get:function(){return o}}})},"renderStyles")}},{key:"wrapTemplate",value:function(n,r){var o=this,i=arguments;return function(){var t={};o.state.on("get",function(e){t[e.key]=1});var e=n.apply(o,[o.state].concat(Array.from(i).slice(2)));return o._lastRenderTimeStamps[r]=Date.now(),o._renderCache[r]=e,o._lastAccessedStateKeys[r]=t,e}}},{key:"renderStyles",value:function(){var t=this;return Promise.resolve(this.stylesTemplate()).then(function(e){return Promise.resolve(t.onRenderStyles()).then(function(){return e})})}},{key:"renderVNode",value:function(){var n=this,e=this.vNodeTemplate();Array.isArray(e)&&(1<e.length&&console.warn("Template output was truncated in",this.constructor.name,"component. Component templates must return a single vNode!"),e=e[0]);var r=[];return(e?this.replaceComponentPlaceholders(e,r).then(function(e){return n._prevVTree=n._vTree,n._vTree=e,Promise.all(r).then(function(e){return Promise.all(k(n._lastRenderedComponents||[],e).map(function(e){return e.unmount()})).then(function(){n._lastRenderedComponents=e})}).then(function(){return!0})}):this._vTree?Promise.all((this._lastRenderedComponents||[]).map(function(e){return e.unmount()})).then(function(){return n._prevVTree=n._vTree,n._lastRenderedComponents=null,n.markWidgetDirty(),!(n._vTree=null)}):Promise.resolve(!1)).then(function(e){if(e){var t={components:r};n._childComponents=r,n.markWidgetDirty(),n.trigger("rendermarkup",t),n.onRenderMarkup(Object.assign({},t))}}).then(function(){return n._vTree})}},{key:"refreshWidgets",value:function(){this._widgetIsDirty&&this.makeNewWidget()}},{key:"makeNewWidget",value:function(){this._prevWidget=this._widget;var e=new v({component:this});return e.bindChildren(this),this._prevWidget&&this._prevWidget.unbindChildren(),this._widgetIsDirty=!1,this._widget=e}},{key:"replaceComponentPlaceholders",value:function(o){var i,s=this,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(o)?Promise.all(o.map(function(e){return s.replaceComponentPlaceholders(e,a)})):o.tagName?(i=o.tagName.toLowerCase())in this.constructor.tagDirectives?Promise.resolve(this.constructor.tagDirectives[i].call(this,o,o.children||[],o.properties.attributes,a)):this.replaceComponentPlaceholders(o.children||[],a).then(function(e){if(i in s.collectComponentTree()){var t=o.properties.attributes,n=e||[];i in a||(a[i]=[]);var r=o.properties.attributes&&o.properties.attributes[s.constructor.Weddell.consts.INDEX_ATTR_NAME]||a[i].length;return s.makeChildComponentWidget(i,r,n,t,a)}return e.some(function(e,t){return o.children[t]!==e})?y(o,g(e)):y(o,null,!0)}):o}},{key:"makeChildComponentWidget",value:function(n,e,t,i){var s=this,a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],u=this.reduceParents(function(e,t){return e||(n in t.components?t:e)},null);if(!u)throw new Error("Unrecognized component name:",n);var c=u.getInitComponentInstance(n,e);return n in a||(a[n]=[]),a[n].push(c),a.push(c),c.then(function(r){a[n].splice(a[n].indexOf(c),1,r),a.splice(a.indexOf(c),1,r),r.assignProps(i,s);var o=[];return r.replaceComponentPlaceholders(t,o).then(function(e){for(var t in r.content=e,r._contentComponents=o){var n=o[t];t in a||(a[t]=[]),Array.isArray(o[t])?a[t]=w(a[t].concat(o[t])):-1===a.indexOf(n)&&a.push(n)}return r.mount(s).then(function(e){return u.trigger("componentplaceholderreplaced",{component:r}),r.makeNewWidget()})})})}},{key:"walkComponents",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){return!0};for(var e in n(this)&&t(this),this.components)Object.values(this._componentInstances[e]).forEach(function(e){return e.walkComponents(t,n)})}},{key:"reduceComponents",value:function(n,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){return!0},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,t=e;for(var i in r(this)&&(t=n(t,this,o)),this.components)t=Object.values(this._componentInstances[i]).reduce(function(e,t){return t.reduceComponents(n,e,r,o+1)},t);return t}},{key:"checkChangedKey",value:function(n){return Object.entries(this._lastAccessedStateKeys).reduce(function(e,t){return n in t[1]?Object.assign(e||{},u({},t[0],1)):e},null)}},{key:"reduceParents",value:function(e,t){var n=this.getParent(),r=!0;return t=e.call(this,t,this,function(){return r=!1}),n&&r?n.reduceParents(e,t):t}},{key:"collectComponentTree",value:function(){var n=this,e=this.getParent();return Object.entries(this.components).reduce(function(e,t){return Object.assign(e,u({},t[0].toLowerCase(),{sourceInstance:n,componentClass:t[1]}))},e?e.collectComponentTree():{})}},{key:"queryDOM",value:function(t){return this.awaitDom().then(function(e){return e.querySelector(t)})}},{key:"queryDOMAll",value:function(t){return this.awaitDom().then(function(e){return e.querySelectorAll(t)})}},{key:"awaitEvent",value:function(e){var t,n=new Promise(function(e){t=e});return this.once(e,function(e){t(e)}),n}},{key:"awaitPatch",value:function(){var e=this;return this.awaitRender().then(function(){return(e.root||e).awaitEvent("patch")})}},{key:"awaitMount",value:function(){return this.isMounted?Promise.resolve():this.awaitEvent("mount")}},{key:"awaitDom",value:function(){return this.el?Promise.resolve(this.el):this.awaitEvent("domcreate").then(function(e){return e.el})}},{key:"awaitRender",value:function(e){return(this.renderPromise?this.renderPromise:Promise.resolve()).then(function(){return e})}},{key:"createChildComponentClass",value:function(r,t){if(Array.isArray(t)){var e=t[2],n=t[1];t=t[0]}t=this.constructor.makeComponentClass(t);var o=this,i=this.root,s={};return s[r]=function(e){function n(e){c(this,n);var t=l(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,h({root:i,parentComponent:o},e)));return o.trigger("createcomponent",{component:t,parentComponent:o,componentName:r}),t.on("createcomponent",function(e){o.trigger("createcomponent",Object.assign({},e))}),t}return f(n,t),n}(),this.trigger("createcomponentclass",{ComponentClass:s[r]}),Object.defineProperties(s[r],{_initOpts:{value:e},_inputMappings:{value:n}}),s[r]}},{key:"init",value:function(e){var n=this;return e=h(e,this.defaultInitOpts),this._isInit?Promise.resolve(this):(this._isInit=!0,["props","state"].forEach(function(e){n[e].on("change",function(e){var t=n.checkChangedKey(e.changedKey);t&&n.markDirty(t)})}),Promise.resolve(this.onInit(e)).then(function(){return n.trigger("init"),n}))}},{key:"bindEvent",value:function(e,t){var n=this.constructor.Weddell.consts;return"(function(event){"+(t&&t.preventDefault?"event.preventDefault();":"")+(t&&t.stopPropagation?"event.stopPropagation();":"")+e+";}.bind(window['"+n.VAR_NAME+"'].components['"+this._id+"'], event)())"}},{key:"bindEventValue",value:function(e,t){return this.bindEvent("this.state['"+e+"'] = event.target.value",t)}},{key:"getMountedChildComponents",value:function(){var t=this;return this.reduceComponents(function(e,t){return e.concat(t)},[],function(e){return e!==t&&e._isMounted})}},{key:"assignProps",value:function(t,e){var n=this;if(t){this.inputs.filter(function(e){return!(e in t||e.key in t)}).forEach(function(e){n.props[e.key||e]=null});var r=Object.entries(t).reduce(function(e,t){return n.inputs.some(function(e){return e===t[0]||e.key===t[0]})?e[0][t[0]]=t[1]:"on"!==t[0].slice(0,2)||t[0]in P?e[2][t[0]]=t[1]:e[1][t[0]]=t[1],e},[{},{},{}]);Object.assign(this.props,r[0]),this.bindInlineEventHandlers(r[1],e),this.state.$attributes=r[2]}}},{key:"bindInlineEventHandlers",value:function(n,e){var t=this,r=Object.entries(this._inlineEventHandlers).reduce(function(e,t){return t[0]in e[1]&&(t[1].handlerString!==n[t[0]]?e[0].push(t):delete e[1][t[0]]),e},[[],Object.assign({},n)]),o=r[0],i=r[1];for(var s in o.forEach(function(e){e[1].off(),delete t._inlineEventHandlers[e[0]]}),i){var a=i[s];this._inlineEventHandlers[s]={handlerString:a};try{var u=new Function("component","event",a).bind(e,this)}catch(n){throw"Failed parsing event handler for component: "+n.stack}this._inlineEventHandlers[s].off=this.on(s.slice(2),u)}}},{key:"addComponentEvents",value:function(e,t,n){var r,o=this;this.constructor.componentEventListeners&&-1<(r=Object.keys(this.constructor.componentEventListeners).map(function(e){return e.toLowerCase()}).indexOf(e))&&(e in this._componentListenerCallbacks||(this._componentListenerCallbacks[e]={}),this._componentListenerCallbacks[e][n]=Object.entries(this.constructor.componentEventListeners[Object.keys(this.constructor.componentEventListeners)[r]]).map(function(e){return t.on(e[0],function(){t.isMounted&&e[1].apply(this,Array.from(arguments).concat(t))}.bind(o))}))}},{key:"unmount",value:function(){var e=this;if(!0!==this._isMounted)return Promise.resolve(!1);for(var t in this._inlineEventHandlers)this._inlineEventHandlers[t].off(),delete this._inlineEventHandlers[t];return this._isMounted=!1,Promise.resolve(this.onUnmount()).then(function(){return Promise.all((e._lastRenderedComponents||[]).map(function(e){return e.unmount()}))}).then(function(){return e.markWidgetDirty(),!0})}},{key:"mount",value:function(e){var t=this;return this._isMounted?Promise.resolve(!1):this._isMounted=this.render().then(function(){t._isMounted=!0;var e=t.hasMounted;return t.hasMounted||(t._hasMounted=!0,t.trigger("firstmount")),t.trigger("mount"),e?t.onMount():Promise.all([t.onMount(),t.onFirstMount()])}).then(function(){return t.markWidgetDirty(),!0})}},{key:"markWidgetDirty",value:function(){this._widgetIsDirty=!0,this.trigger("widgetdirty")}},{key:"makeComponentInstance",value:function(e,t){var n=this;e=e.toLowerCase();var r=new this.components[e]({store:h({$componentID:this.components[e]._id,$instanceKey:t})});return this.addComponentEvents(e,r,t),r.on("requestpatch",function(e){n._componentsRequestingPatch.push(r),n.trigger("requestpatch",Object.assign({},e))}),r}},{key:"getComponentInstance",value:function(e,t){return e=e.toLowerCase(),this._componentInstances[e][t]}},{key:"getInitComponentInstance",value:function(e,t){var n=this.getComponentInstance(e,t);return n?Promise.resolve(n):(this._componentInstances[e][t]=this.makeComponentInstance(e,t)).init(this.components[e]._initOpts)}},{key:"cleanupComponentInstances",value:function(){}}],[{key:"makeComponentClass",value:function(e){if("function"!=typeof e||e.isWeddellComponent)return this.bootstrapComponentClass(e);var t=e.toString();return t in this.generatedComponentClasses?this.generatedComponentClasses[t]:this.generatedComponentClasses[t]=this.bootstrapComponentClass(e.call(this,this.Weddell.classes.Component))}},{key:"bootstrapComponentClass",value:function(e){var t=this.Weddell.classes.Component;if(e.prototype&&(e.prototype instanceof t||e.prototype.constructor===t)){if(!e.id){var n=d(),r=e;e=function(e){function t(){return c(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,r),o(t,null,[{key:"id",get:function(){return n}},{key:"BaseClass",get:function(){return r}}]),t}()}return e}throw"Unsupported component input"}},{key:"state",get:function(){return{}}},{key:"tagDirectives",get:function(){return{content:function(e,t,n,r){return this.content}}}},{key:"generatedComponentClasses",get:function(){return O},set:function(e){return O=e}}]),a}();t.exports=j},{"../utils/clone-vnode":75,"../utils/compact":76,"../utils/difference":77,"../utils/flatten":78,"../utils/make-hash":80,"../utils/uniq":81,"./event-emitter-mixin":64,"./vdom-widget":66,"deep-equal":7,"mixwith-es5":23,"object.defaults/immutable":25,"virtual-dom/h":34}],64:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("mixwith-es5").Mixin,i=(e("../utils/includes"),o(function(t){return function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return Object.defineProperties(t,{_callbacks:{value:{}}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),r(n,[{key:"on",value:function(e,t){var n=this;return Array.isArray(e)?e.forEach(function(e){return n.on(e,t)}):(e in this._callbacks||(this._callbacks[e]=[]),this._callbacks[e]=this._callbacks[e].concat(t)),function(){return n.off(e,t)}}},{key:"once",value:function(e,t){var n=this.on(e,function(){t.apply(this,arguments),n()});return n}},{key:"off",value:function(n){function e(e,t){return n.apply(this,arguments)}return e.toString=function(){return n.toString()},e}(function(e,t){if(Array.isArray(e))return e.map(off,t);if(e in this._callbacks){var n=this._callbacks[e].indexOf(t);return-1<n&&this._callbacks[e].splice(n,1),this._callbacks[e].length||delete this._callbacks[e],!0}return!1})},{key:"trigger",value:function(e,t,n){var r=this;return t=Object.assign({},t,{eventName:e}),Array.isArray(e)?e.map(function(e){return r.trigger(e,t,n)}):(e in this._callbacks?this._callbacks[e]:[]).map(function(e){return e.call(n||r,t)})}}]),n}()}));t.exports=i},{"../utils/includes":79,"mixwith-es5":23}],65:[function(e,t,n){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),s=e("./event-emitter-mixin"),a=e("deep-equal"),u=e("object.defaults/immutable"),c=e("../utils/includes"),l=e("../utils/difference"),f=e("mixwith-es5").mix,p=e("array-uniq"),h={shouldMonitorChanges:!0,shouldEvalFunctions:!0,inputMappings:{},validators:{}},d=function(e){function r(e,t){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,r),t=u(t,h);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this));return Object.defineProperties(n,{_initialCalled:{value:{},writable:!0},shouldMonitorChanges:{value:t.shouldMonitorChanges},shouldEvalFunctions:{value:t.shouldEvalFunctions},_data:{configurable:!1,value:{}},_cache:{value:{},writable:!0},_funcProps:{configurable:!1,value:{}},_funcPropHandlerRemovers:{configurable:!1,value:{}},_proxyObjs:{configurable:!1,value:{}},_dependencyKeys:{configurable:!1,value:[]},_proxyProps:{configurable:!1,value:{}},_firstGet:{writable:!0,value:!1},_validators:{value:t.validators},transform:{value:t.transform},overrides:{value:Array.isArray(t.overrides)?t.overrides:t.overrides?[t.overrides]:[]},proxies:{value:Array.isArray(t.proxies)?t.proxies:t.proxies?[t.proxies]:[]},extends:{value:Array.isArray(t.extends)?t.extends:t.extends?[t.extends]:[]},inputMappings:{value:t.inputMappings}}),l(Object.values(n.inputMappings),Object.keys(e)).forEach(function(e){n.set(e,null)}),e&&n.assign(e),n.extends.forEach(function(e){e.on("change",function(e){e.changedKey in this.inputMappings&&((e=Object.assign({},e)).changedKey=this.inputMappings[e.changedKey],this.trigger("change",e))}.bind(n)),e.on("get",function(e){e.key in this.inputMappings&&((e=Object.assign({},e)).key=this.inputMappings[e.key],this.trigger("get",e))}.bind(n))}),Object.keys(n.inputMappings).forEach(function(e){n.set(e,null,!0)}),n.proxies.concat(n.overrides).forEach(function(e){Object.keys(e).forEach(function(e){n.set(e,null,!0)}),e.on("change",function(e){n.trigger("change",Object.assign({},e))}),e.on("get",function(e){n.trigger("get",Object.assign({},e))})}),n.on("change",function(e){delete n._cache[e.changedKey]}),Object.seal(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,f(d).with(s)),o(r,[{key:"transformValue",value:function(e,t){return this.transform?this.transform(e,t):t}},{key:"set",value:function(o,e,t){if(!(o in this)){if(!t)var n=function(e){if(this.shouldMonitorChanges){var t=this._data[o];t&&"object"===(void 0===t?"undefined":i(t))&&(t=Object.assign({},t))}if(this.shouldEvalFunctions&&"function"==typeof e)this._funcProps[o]=e;else{if(o in this._validators){var n=this._validators[o],r=null==e?this.getValue(o):e;if(n.required&&null==r)throw"Required component input missing: "+o;if(n.validator&&!n.validator(r))throw"Input failed validation: "+o+". Received value: "+r}this._data[o]=e,this.shouldMonitorChanges&&(a(e,t)||this.trigger("change",{target:this,changedKey:o,newValue:this.transformValue(o,e),oldValue:this.transformValue(o,t)}))}}.bind(this);Object.defineProperty(this,o,{configurable:!1,enumerable:!0,get:function(){var e=this.transformValue(o,this.getValue(o));return this.trigger("get",{key:o,value:e}),e}.bind(this),set:n}),t?this._data[o]=e:this[o]=e}}},{key:"getValue",value:function(t){var e,n=this,r=0;if(this._cache[t])return this._cache[t];if(this.shouldEvalFunctions&&!this._firstGet)for(var o in this._firstGet=!0,this._funcProps)this[o];t in this._funcProps&&!this._initialCalled[t]&&(this._initialCalled[t]=!0,e=this[t]=this.evaluateFunctionProperty(t),this.on("change",function(e){c(n._dependencyKeys[t],e.changedKey)&&(n[t]=n.evaluateFunctionProperty(t))}));for(;this.overrides[r]&&null==e;)e=this.overrides[r][t],r++;r=0,null!=e||(e=this._data[t]);for(var i=Object.entries(this.inputMappings).find(function(e){return t===e[1]});i&&this.extends[r]&&null==e;)e=this.extends[r][i[0]],r++;for(r=0;this.proxies[r]&&null==e;)e=this.proxies[r][t],r++;return e}},{key:"assign",value:function(e){var t=this;e&&(Array.isArray(e)?e.forEach(function(e){return t.set(e,null)}):Object.entries(e).forEach(function(e){t.set(e[0],e[1])}))}},{key:"await",value:function(e){var r=this;return Array.isArray(e)?Promise.all(e.map(function(e){return r.await(e)})):Promise.resolve(this.getValue(e)||new Promise(function(t){var n=r.watch(e,function(e){n(),t(e)},!0,!0)}))}},{key:"evaluateFunctionProperty",value:function(e){var t=[],n=this.on("get",function(e){t.push(e.key)}),r=this._funcProps[e].call(this);return n(),this._dependencyKeys[e]=p(t),r}},{key:"watch",value:function(n,r,o,e){void 0===o&&(o=!0),Array.isArray(n)||(n=[n]);var t=function(){var t=this,e=n.map(function(e){return t[e]});o&&!e.every(function(e){return void 0!==e})||r.apply(this,e)},i=this.on("change",function(e){c(n,e.changedKey)&&t.call(this)});return e&&t.call(this),i}}]),r}();t.exports=d},{"../utils/difference":77,"../utils/includes":79,"./event-emitter-mixin":64,"array-uniq":4,"deep-equal":7,"mixwith-es5":23,"object.defaults/immutable":25}],66:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("virtual-dom/patch"),i=e("virtual-dom/diff"),a=e("virtual-dom/create-element"),u=e("../utils/clone-vnode");t.exports=function(){function s(e){var t=e.component,n=void 0===t?null:t,r=e.vTree,o=void 0===r?n._vTree:r;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,s),this.component=n,this.childWidgets=[],this._callbacks=[],this.vTree=this.cloneVNode(o,!0,this.childWidgets)}return r(s,[{key:"cloneVNode",value:function(e){var t=this,r=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(Array.isArray(e)){var o=e.map(function(e){return t.cloneVNode(e,r,n)});return r&&(o=o.reduce(function(e,t,n){return t&&t instanceof s?r&&!t.vTree||e.push(t):r&&null==t||e.push(t),e},[])),o}if(e){if(e instanceof s){var i=e.component._widgetIsDirty?e.component.makeNewWidget():e.component._widget;return n.push(i),i}return e.tagName?u(e,this.cloneVNode(e.children,r,n)):e}return e}},{key:"type",get:function(){return"Widget"}}]),r(s,[{key:"bindChildren",value:function(t){this._callbacks=this.childWidgets.map(function(e){return e.component.on("widgetdirty",function(){t.markWidgetDirty()})})}},{key:"unbindChildren",value:function(){this._callbacks.forEach(function(e){return e()})}},{key:"init",value:function(){if(!this.vTree)throw"Component has no VTree to init with";var e=a(this.vTree);return this.fireDomEvents(this.component.el,this.component._el=e),e}},{key:"fireDomEvents",value:function(e,t){e?e!==t&&(this.component.trigger("domchange",{el:t}),this.component.onDOMChange.call(this.component,{newEl:t,prevEl:e}),this.component.trigger("domcreateorchange",{newEl:t,prevEl:e}),this.component.onDOMCreateOrChange.call(this.component,{newEl:t,prevEl:e}),0!==e.compareDocumentPosition(t)&&(this.component.trigger("dommove"),this.component.onDOMMove.call(this.component,{newEl:t,prevEl:e}))):(this.component.trigger("domcreate",{el:t}),this.component.onDOMCreate.call(this.component,{el:t}),this.component.trigger("domcreateorchange",{newEl:t,prevEl:e}),this.component.onDOMCreateOrChange.call(this.component,{newEl:t,prevEl:e}))}},{key:"update",value:function(e,t){if(e instanceof s){var n=i(e.vTree,this.vTree),r=o(t,n);return this.fireDomEvents(this.component.el,this.component._el=r),r}return this.init()}},{key:"destroy",value:function(e){e===this.component.el&&(this.component._el=null,this.component.onDOMDestroy.call(this.component,{el:e}))}}]),s}()},{"../utils/clone-vnode":75,"virtual-dom/create-element":32,"virtual-dom/diff":33,"virtual-dom/patch":35}],67:[function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("mixwith-es5").mix,s=e("./app"),a=e("./component"),u=e("./store"),c=function(){function n(){o(this,n)}return r(n,null,[{key:"plugin",value:function(t){var r=function(e){function t(){return o(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n),t}();if(!t.id)throw"Got a plugin with no ID assigned. Aborting";return r.loadedPlugins.includes(t.id)?console.warn("Plugin "+t.id+" already loaded. Ignoring."):(t.requires&&!r.loadedPlugins.includes(t.requires)&&[].concat(t.requires).forEach(function(e){throw"Plugin "+t.id+" requires the plugin "+e+", which is not loaded. Load "+e+" first."}),t.classes&&(Object.entries(t.classes).forEach(function(e){var t=e[0],n=e[1];t in r.classes?r.classes[t]=i(r.classes[t]).with(n):r.classes[t]=n}),Object.values(r.classes).forEach(function(e){e.NewWeddell=r})),t.deps&&Object.entries(t.deps).forEach(function(e){if(e[0]in r.deps)throw"Dependency conflict while loading plugin: "+e[0]+" is taken.";r.deps[e[0]]=e[1]}),r.loadedPlugins.push(t.id)),r}}]),n}();c.loadedPlugins=[],c.consts={VAR_NAME:"_wdl",INDEX_ATTR_NAME:"data-component-index"},c.deps={},c.classes={App:s,Component:a,Store:u},Object.values(c.classes).forEach(function(e){e.Weddell=c}),t.exports=c},{"./app":62,"./component":63,"./store":65,"mixwith-es5":23}],68:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var s=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),l=e("prescribe"),a=e("mixwith-es5").Mixin,u=e("object.defaults/immutable"),f=e("../../utils/includes"),c={markupFormat:"HTMLString"},p={markupRenderFormat:"HTMLString"};t.exports=function(e,t){return e.plugin({id:"html",classes:{Sig:a(function(n){return(n=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,n),t}()).addTypeAlias("HTMLString","String"),n}),App:a(function(t){return function(e){function n(e){r(this,n),e=u(e,p);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.renderers.HTMLString=t.renderHTML.bind(t),t}return i(n,t),s(n,[{key:"renderHTML",value:function(e){this.el&&(this.el.innerHTML=e)}}]),n}()}),Component:a(function(t){return t=function(e){function n(e){r(this,n),e=u(e,c);var t=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.renderers.HTMLString=t.interpolateHTMLComponents.bind(t),t}return i(n,t),s(n,[{key:"interpolateHTMLComponents",value:function(e,n,o){var i,s,a=this,t=new l(e.trim()),r=Object.keys(this.components),u=0,c=[];return o||(o={}),t.readTokens({chars:function(e){(i?i.contents:c).push(e.text)},startTag:function(e){u++;var t=i?i.contents:c;if(!i&&f(r,e.tagName)){e.tagName in o||(o[e.tagName]=[]);var n=e.attrs[a.constructor.Weddell.consts.INDEX_ATTR_NAME]||o[e.tagName].length;i={Component:a.components[e.tagName],depth:u,name:e.tagName,props:Object.assign({},e.attrs,e.booleanAttrs),contents:[],index:n},o[e.tagName].push(i)}else"content"===e.tagName?s=u:t.push(e.text)},endTag:function(t){var e=i?i.contents:c;if(i&&t.tagName===i.name&&i.depth===u){var r=i;c.push(a.interpolateHTMLComponents(i.contents.join(""),null,o).then(function(n){return a.getComponentInstance(t.tagName,r.index).then(function(e){var t=e._pipelines.markup.targetRenderFormat;return e.render("markup",n,r.props,t)})}).then(function(e){return a.trigger("rendercomponent",{componentOutput:e,componentName:t.tagName,props:r.props}),e.output})),i=null}else"content"===t.tagName&&u===s?(e.push(a.interpolateHTMLComponents(n||"")),s=null):e.push(t.text);u--}}),Promise.all(c).then(function(e){return e.join("")})}}]),n}()})}})}},{"../../utils/includes":79,"mixwith-es5":23,"object.defaults/immutable":25,prescribe:29}],69:[function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function e(t,n,r){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,n);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,r)}if("value"in o)return o.value;var s=o.get;return void 0!==s?s.call(r):void 0},u=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),c=e("mixwith-es5").Mixin,l=e("mixwith-es5").mix,f=e("./router"),p=e("./state-machine-mixin"),h=e("./machine-state-mixin"),d=e("defaults-es6/deep-merge"),v=l(function e(t){s(this,e),this.Component=t.Component,this.componentName=t.componentName}).with(h);t.exports=function(e){return e.plugin({id:"router",classes:{App:c(function(n){return function(e){function t(e){s(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.router=new f({routes:e.routes,onRoute:function(n,e){var t=this,r=[];return this.el.classList.add("routing"),this.el.setAttribute("data-current-route",n.route.name),n.isRouteUpdate&&(this.el.classList.add("route-update"),n.keepUpdateScrollPos&&this.el.classList.add("keep-scroll-pos")),this.trigger("routematched",{matches:n}),Promise.resolve(this.onBeforeRoute.call(this,{matches:n,componentNames:e})).then(function(){return t.el.classList.add("prerouting-finished"),e.map(function(e){return e.toLowerCase()}).reduce(function(e,n){return e.then(function(t){return t.getInitComponentInstance(n,"router").then(function(e){return e?(r.push({component:e,currentComponent:t,componentName:n}),e):Promise.reject("Failed to resolve "+n+" while routing.")})})},Promise.resolve(t.component)).then(function(e){return r.push({currentComponent:e,component:null,componentName:null}),r.reduce(function(e,t){return e.then(function(){return t.currentComponent.changeState.call(t.currentComponent,t.componentName,{matches:n})})},Promise.resolve()).then(function(e){return t.awaitPatch().then(function(){return e})})},console.warn).then(function(e){return t.el.classList.remove("routing"),t.el.classList.remove("prerouting-finished"),t.el.classList.remove("route-update"),t.el.classList.remove("keep-scroll-pos"),t.trigger("route",{matches:n,results:e}),e})})}.bind(n),onHashChange:function(e){return e}.bind(n)}),n.on("createcomponent",function(t){n.on("routematched",function(e){t.component.state.$currentRoute=e.matches}),t.component.router=n.router,t.component.state.$currentRoute=n.router.currentRoute}),n}return o(t,n),u(t,[{key:"onBeforeRoute",value:function(){}}]),u(t,[{key:"init",value:function(){var e=this;return a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this).then(function(){return e.router.init()})}}]),t}()}),Component:c(function(t){return function(e){function n(e){s(this,n),e.stateClass=v;var t,i=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,d(e,{store:{$routerLink:function(){return t.compileRouterLink.apply(t,arguments)}}})));return(t=i).on("init",function(){Object.entries(i.components).forEach(function(e){var o=e[0],t=new v([["onEnterState","onEnter"],["onExitState","onExit"],["onUpdateState","onUpdate"]].reduce(function(e,n){var r=n[0];return e[r]=function(t){return i.getInitComponentInstance(o,"router").then(function(e){return Promise.resolve(e[n[1]].call(e,Object.assign({},t))).then(function(){return e})}).then(function(e){switch(r){case"onEnterState":case"onExitState":return i.markDirty().then(function(){return e})}return e})},e},{Component:e[1],componentName:o}));i.addState(o,t)})}),i}return o(n,l(t).with(p)),u(n,[{key:"onEnter",value:function(){}},{key:"onExit",value:function(){}},{key:"onUpdate",value:function(){}}],[{key:"state",get:function(){return d({$currentRoute:null},a(n.__proto__||Object.getPrototypeOf(n),"state",this))}},{key:"tagDirectives",get:function(){return d({routerview:function(e,t,n,r){return this.currentState?this.makeChildComponentWidget(this.currentState.componentName,"router",t,n,r):null}},a(n.__proto__||Object.getPrototypeOf(n),"tagDirectives",this))}}]),u(n,[{key:"compileRouterLink",value:function(e){var t=this.router.compileRouterLink(e);return t&&"object"===(void 0===t?"undefined":i(t))?t.fullPath:"string"==typeof t?t:void 0}},{key:"route",value:function(e){this.router.route(e)}}]),n}()}),Router:f}})}},{"./machine-state-mixin":70,"./router":71,"./state-machine-mixin":72,"defaults-es6/deep-merge":10,"mixwith-es5":23}],70:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("mixwith-es5").mix,i=e("../../core/event-emitter-mixin"),s=e("mixwith-es5").DeDupe,a=(0,e("mixwith-es5").Mixin)(function(t){return function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.onEnterState=e.onEnterState,t.onExitState=e.onExitState,t.onUpdateState=e.onUpdateState,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o(t).with(s(i))),r(n,[{key:"stateAction",value:function(e,t,n){var r=this;return Promise.resolve(this[e]&&this[e](Object.assign({},n))).then(function(){return r.trigger(t,Object.assign({},n))})}},{key:"exitState",value:function(e){return this.stateAction("onExitState","exit",e)}},{key:"enterState",value:function(e){return this.stateAction("onEnterState","enter",e)}},{key:"updateState",value:function(e){return this.stateAction("onUpdateState","update",e)}}]),n}()});t.exports=a},{"../../core/event-emitter-mixin":64,"mixwith-es5":23}],71:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t,n,r,o){var i=[];if("/"!==e.charAt(0)){if(t)var s=l("/"+e,i,{end:o}),a=n,u=r,c=s.exec(a)}else u=a=r,c=(s=l(e,i,{end:o})).exec(a);return{params:i,match:c,fullPath:u,pathName:a,regex:s}}var o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),i=e("object.defaults/immutable"),l=e("path-to-regexp"),s=e("find-parent"),u=e("array-compact"),c={},f=e("mixwith-es5").mix,h=e("../../core/event-emitter-mixin"),d=function e(){r(this,e)},a=function(e){function a(e){r(this,a),e=i(e,c);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.currentRoute=null,t.routes=[],t.promise=null,t.onRoute=e.onRoute,t._isInit=!1,e.routes&&t.addRoutes(e.routes),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,f(d).with(h)),o(a,[{key:"route",value:function(e){var r=this,t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if("boolean"!=typeof t&&(n=t,t=!1),"string"==typeof e)var o=this.matchRoute(e,this.routes);else if(Array.isArray(e))o=e;else if(e){if(o=this.compileRouterLink(e))return this.route(o.fullPath+(e.hash?"#"+e.hash:""),t,n)}if(o){var i=o.hash;Object.assign(o,{triggeringEvent:n});var s=!this.currentRoute;if(this.currentRoute&&o.fullPath===this.currentRoute.fullPath)var a=Promise.resolve(Object.assign(o,{isCurrentRoute:!0})).then(function(e){if(r.currentRoute.hash!==e.hash)return t?r.replaceState(e.fullPath,i):r.pushState(e.fullPath,i)});else a=Promise.all(o.map(function(e,t){if(t===o.length-1&&e.route.redirect){if("function"==typeof e.route.redirect)var n=e.route.redirect.call(r,o);else n=e.route.redirect;if(n===o.fullPath)throw"Redirect loop detected: '"+n+"'";return Promise.reject(n)}return Promise.resolve("function"==typeof e.route.handler?e.route.handler.call(r,o):e.route.handler)})).then(function(e){return Promise.resolve(r.onRoute?r.onRoute.call(r,o,u(e)):null).then(function(){return o}).then(function(e){if(s||t)r.replaceState(e.fullPath,i);else if(!e.isCurrentRoute)return r.pushState(e.fullPath,i,e.isRouteUpdate&&e.keepUpdateScrollPos?null:{x:0,y:0}).then(function(){return e});return e})},function(e){return r.route(e,!0,n)}),this.currentRoute=o;return this.promise=a.then(function(e){return r.promise=null,e})}return this.promise=null}},{key:"awaitRoute",value:function(){return this.promise?this.promise:Promise.resolve()}},{key:"matchRoute",value:function(i,e,s,a,u){var c=this;s||(s=[]);var l=null,t=i.indexOf("#"),f=-1<t?i.slice(t+1):"";return"string"!=typeof(i=-1<t?i.slice(0,t):i)?null:(void 0===a&&(a=i),"/"!==a.charAt(0)&&this.currentRoute&&(a=this.currentRoute.fullPath+a),e.every(function(e){var t=p(e.pattern,u,i,a,!1),n=s.concat({route:e,match:t.match,params:t.params});if(e.children&&(l=c.matchRoute(t.pathName.replace(t.regex,""),e.children,n,t.fullPath,!!t.match)),!l){var r={route:e,match:(t=p(e.pattern,u,i,a,!0)).match,params:t.params},o=!0;e.validator&&(o=e.validator.call(e,r)),l=t.match&&o?s.concat(r):null}return l&&(l.paramVals=l.reduce(function(n,r){return r.params.forEach(function(e,t){r.match&&(n[e.name]=r.match[t+1])}),n},{}),l.route=l[l.length-1].route,l.fullPath=a,l.hash=f),!l}),l&&(l.isRouteUpdate=!(!this.currentRoute||l.route.name!==this.currentRoute.route.name),l.keepUpdateScrollPos=l.isRouteUpdate&&!!("function"==typeof l.route.keepUpdateScrollPos?l.route.keepUpdateScrollPos.call(this,{newRoute:l,prevRoute:this.currentRoute}):l.route.keepUpdateScrollPos)),l)}},{key:"addRoutes",value:function(e){this.routes=this.routes.concat(e)}},{key:"compileRouterLink",value:function(e){if("string"==typeof e)return e;var t,n={};this.currentRoute&&(t=this.currentRoute.route.name,n=this.currentRoute.reduce(function(r,o){return o.params.forEach(function(e,t){var n=o.match[t+1];void 0!==n&&(r[e.name]=n)}),r},n)),t=e.name?e.name:t,e.params=Object.assign(n,e.params);var r=a.getNamedRoute(t,this.routes);if(r){try{var o=r.reduce(function(e,t){var n=t.pattern;return"/"===t.pattern.charAt(0)?n:e+n},""),i=l.compile(o)(e.params)}catch(e){throw"Encountered error trying to build router link: "+e.toString()}var s=[{fullPath:i,route:r,match:null}];return s.route=r,s.fullPath="/"!==i[0]?"/"+i:i,s}return console.warn("could not find route with name",t),null}},{key:"init",value:function(){var r=this;return!this._isInit&&this.routes?("scrollRestoration"in history&&(history.scrollRestoration="manual"),this._isInit=!0,addEventListener("popstate",this.onPopState.bind(this)),addEventListener("hashchange",this.onHashChange.bind(this)),document.body.addEventListener("click",function(e){var t=s.byMatcher(e.target,function(e){return"A"===e.tagName});if(t){var n=t.getAttribute("href");n&&r.route(n,e)&&(e.preventDefault(),r.replaceState(location.pathname,location.hash))}}),this.route(location.pathname+location.hash)):Promise.resolve()}},{key:"pushState",value:function(o,i,s){var a=this;return i&&"#"!==i.charAt(0)&&(i="#"+i),"/"!==o.charAt(o.length-1)&&(o+="/"),"string"!=typeof i&&(i=""),new Promise(function(t){var n,r=!1,e=function(e){r?(n(),history.replaceState({fullPath:o,hash:i,scrollPos:s,isWeddellState:!0},document.title,location.origin+o+location.search+(i||""))):history.pushState({fullPath:o,hash:i,scrollPos:s,isWeddellState:!0},document.title,location.origin+o+location.search+(i||"")),a.setScrollPos(s,i),t()};location.hash===i?e():(r=!0,n=a.on("hashchange",e),location.hash=i)})}},{key:"replaceState",value:function(e,t,n){t&&"#"!==t.charAt(0)&&(t="#"+t),"/"!==e.charAt(e.length-1)&&(e+="/");var r={x:window.pageXOffset,y:window.pageYOffset};history.state&&history.state.isWeddellState&&history.state.fullPath===e&&history.state.hash===t||history.replaceState({fullPath:e,hash:t,scrollPos:r,isWeddellState:!0},document.title,location.origin+e+location.search+(t||"")),this.setScrollPos(n,t)}},{key:"onHashChange",value:function(e){history.state||this.replaceState(location.pathname,location.hash,{x:window.pageXOffset,y:window.pageYOffset}),this.trigger("hashchange")}},{key:"setScrollPos",value:function(e,t){if(t){var n;try{n=document.querySelector(t)}catch(e){}n&&window.scrollTo(n.offsetLeft,n.offsetTop)}else e&&window.scrollTo(e.x,e.y)}},{key:"onPopState",value:function(t){if(history.state,t&&t.state&&!0===t.state.isWeddellState){var e=this.route(t.state.fullPath+(t.state.hash||""),!0,t);e&&t.state.scrollPos&&(e.then?e.then(function(e){window.scrollTo(t.state.scrollPos.x,t.state.scrollPos.y)}):window.scrollTo(t.state.scrollPos.x,t.state.scrollPos.y))}}}],[{key:"getNamedRoute",value:function(t,e,n){var r=this;if(!t)return null;n||(n=[]);var o=null;return e.every(function(e){return!(o=e.name===t?e:o)&&e.children&&(o=r.getNamedRoute(t,e.children,n.concat(e))),!o}),o&&(o=Object.assign({route:o},o),o=Object.assign(n.concat(o.route),o)),o||null}}]),a}();t.exports=a},{"../../core/event-emitter-mixin":64,"array-compact":1,"find-parent":15,"mixwith-es5":23,"object.defaults/immutable":25,"path-to-regexp":27}],72:[function(e,t,n){"use strict";var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),o=e("mixwith-es5").mix,i=e("../../core/event-emitter-mixin"),s=e("mixwith-es5").DeDupe,a=e("./machine-state-mixin"),u=e("mixwith-es5").Mixin,c=e("mixwith-es5").hasMixin,l=u(function(t){return function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return Object.defineProperties(t,{stateClass:{value:e.stateClass},currentState:{writable:!0,value:null},previousState:{writable:!0,value:null},states:{value:{}}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,o(t).with(s(i))),r(n,[{key:"onEnterState",value:function(){}},{key:"onExitState",value:function(){}},{key:"onUpdateState",value:function(){}},{key:"getState",value:function(e){return e?"string"==typeof e?this.states[e]||null:this.constructor.checkIfIsState(e)?e:null:null}},{key:"addState",value:function(e,t,n,r){this.constructor.checkIfIsState(t)&&(this.states[e]=t)}},{key:"changeState",value:function(e,t){var n=this;e=this.getState(e);var r=Promise.resolve();return e&&this.currentState===e?r=Promise.all([this.currentState.updateState(Object.assign({updatedState:this.currentState},t)),this.onUpdateState(Object.assign({updatedState:this.currentState},t))]).then(function(){n.trigger("updatestate",Object.assign({updatedState:n.currentState},t))}):(this.currentState&&(this.previousState=this.currentState,this.currentState=null,r=Promise.all([this.previousState.exitState(Object.assign({exitedState:this.previousState,enteredState:e},t)),this.onExitState(Object.assign({exitedState:this.previousState,enteredState:e},t))]).then(function(){n.trigger("exitstate",Object.assign({exitedState:n.previousState,enteredState:e},t))})),e&&(r=r.then(function(){return Promise.all([e.enterState(Object.assign({exitedState:n.previousState,enteredState:n.currentState=e},t)),n.onEnterState(Object.assign({exitedState:n.previousState,enteredState:n.currentState},t))])}).then(function(){n.trigger("enterstate",Object.assign({exitedState:n.previousState,enteredState:n.currentState},t))}))),r.then(function(){return n.currentState})}}],[{key:"checkIfIsState",value:function(e){var t=c(e,a);return t||console.warn("Supplied state class does not extend MachineState. Expect unreliable results."),t}}]),n}()});t.exports=l},{"../../core/event-emitter-mixin":64,"./machine-state-mixin":70,"mixwith-es5":23}],73:[function(e,t,n){"use strict";e("native-promise-only"),t.exports=e("../plugins/html")(e("../plugins/router")(e("./weddell")))},{"../plugins/html":68,"../plugins/router":69,"./weddell":74,"native-promise-only":24}],74:[function(e,t,n){"use strict";t.exports=e("../core/weddell")},{"../core/weddell":67}],75:[function(e,t,n){"use strict";var r=e("virtual-dom/h"),o=e("virtual-dom/virtual-hyperscript/svg");t.exports=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]&&!t&&!e.namespace?e:(e.namespace?o:r)(e.tagName,Object.assign({},e.properties,{key:e.key}),t||e.children)}},{"virtual-dom/h":34,"virtual-dom/virtual-hyperscript/svg":48}],76:[function(e,t,n){"use strict";t.exports=function(e){return e.filter(function(e){return null!=e})}},{}],77:[function(e,t,n){"use strict";t.exports=function(e,t){return e.filter(function(e){return t.indexOf(e)<0})}},{}],78:[function(e,t,n){"use strict";t.exports=function(e){var t;return(t=[]).concat.apply(t,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e))}},{}],79:[function(e,t,n){"use strict";t.exports=function(e,t){return e.some(function(e){return e===t})}},{}],80:[function(e,t,n){"use strict";t.exports=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},{}],81:[function(e,t,n){"use strict";t.exports=function(e){return e.reduce(function(e,t){return e.includes(t)?e:e.concat(t)},[])}},{}]},{},[73])(73)});